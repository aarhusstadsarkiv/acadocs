{"config":{"lang":["da"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#velkommen-til-acadocs","title":"Velkommen til ACADocs!","text":"<p>Her finder du dokumentation om arbejdsgange, software og meget andet, der benyttes hos Aarhus Stadsarkiv.</p>"},{"location":"acquisition/","title":"Modtagelse","text":"<p>Overview inside acquisition</p>"},{"location":"acquisition/acquiring-analog-material/","title":"Acquiring analog material","text":""},{"location":"acquisition/acquiring-analog-material/#modtagelse-af-analog-materiale","title":"Modtagelse af analog materiale","text":""},{"location":"acquisition/acquiring-digital-material/","title":"Digitalt Materiale","text":"<p>Modtagelse af digitalt materiale</p>"},{"location":"acquisition/acquiring-digital-material/#identifikator","title":"Identifikator","text":"<p>N\u00e5r digitalt materiale modtages til bevaring hos Aarhus Stadsarkiv, skal afleveringen gives et AARS-ID med f\u00f8lgende m\u00f8nster.</p> <pre><code>^(\\w+\\.)?(AARS\\.).*\n</code></pre> <p>Dette m\u00f8nster forst\u00e5s som f\u00f8lger.</p> <ol> <li><code>^(\\w+\\.)?</code> angiver, at der kan v\u00e6re et valgfrit alfanumerisk pr\u00e6fiks afsluttet med punktum, for eksempel <code>AVID.</code></li> <li><code>(AARS\\.)</code> angiver, at strengen <code>AARS.</code> er p\u00e5kr\u00e6vet som del af navnet</li> <li><code>.*</code> angiver, at der kan v\u00e6re et valgfrit postfiks</li> </ol> <p>Derfor er f\u00f8lgende eksempler valide AARS-ID'er</p> <p>Eksempel</p> <p><code>AVID.AARS.3.1</code></p> <p><code>AARS.TEST</code></p> <p><code>123bc.AARS.2s</code></p> <p>mens disse ikke er</p> <p>Eksempel</p> <p><code>AVID.3.1</code></p> <p><code>AARSTEST</code></p> <p><code>123.bc.AARS.2s</code></p>"},{"location":"archival-versions/","title":"Introduktion","text":"<p>Alt om arbejdet med arkiveringsversioner</p>"},{"location":"archival-versions/ada/","title":"Ada","text":"<p>Kristians dokumentation af testarbejdet i ADA</p>"},{"location":"archival-versions/master-formats/","title":"Master formats","text":"<p>Description of our choice of master-formats.</p>"},{"location":"archival-versions/notes-arkivering/","title":"Notesarkivering","text":"<p>I det f\u00f8lgende beskrives processen med arkiveringsversioner, som modtages i forbindelse med Notes-projektet.</p> <p>Bem\u00e6rk</p> <ul> <li>I dokumentationen bruges AVID.AARS.3.1 som eksempel. Husk at udskifte AVID \"3\" med det relevante id.</li> <li>Arkiveringsversion betegnes i det f\u00f8lgende ogs\u00e5 aflevering.</li> </ul>"},{"location":"archival-versions/notes-arkivering/#modtagelse-og-validering","title":"Modtagelse og validering","text":""},{"location":"archival-versions/notes-arkivering/#kopiering-til-lokal-disk","title":"Kopiering til lokal disk","text":"<p>Arkiveringsversioner fra Notes-projektet afleveres p\u00e5 usb-diske, hvorfra de umiddelbart efter modtagelse kopieres til en placering p\u00e5 vores infrastrutur (ekstern usb-harddisk, intern D-drev eller lignende).</p> <p>Advarsel</p> <p>Det er vigtigt at stoppe Kaspersky s\u00e5 snart den modtagne usb-disk er plugget til den administrative PC, da Kaspersky i det skjulte sletter gamle .xls-filer, hvis de indeholder macroer.</p> <p>Arkiveringsversionen kopieres fuldgyldigt til en mappe, som navngives med afleveringens AVID og tilf\u00f8jes en \"_metadata\"-mappe, hvori vi efterf\u00f8lgende samler diverse logs, mails, statusdokumenter m.m. med relation til afleveringen og testen:</p> <pre><code>/AVID.AARS.3.1\n|-- _metadata/\n    |-- ADA_log-leverand\u00f8r.rtf\n    |-- status.txt\n    |-- ...\n|-- ContextDocumentation/\n|-- Indices/\n|-- Schemas/\n|-- Tables/\n|-- OriginalDocuments/\n    |-- docCollection1\n    |-- docCollection2\n    |-- ...\n</code></pre> <p>Efter fuldendt kopiering l\u00e6gges den afleverede usb-disk til side. Vi skal ikke bruge den originale aflevering mere, med mindre vi senere i processen ved et uheld kommer til at slette eller \u00e6ndre noget.</p>"},{"location":"archival-versions/notes-arkivering/#validering-af-dokumentstruktur","title":"Validering af dokumentstruktur","text":"<p>Hvis afleveringen indeholder digitale dokumenter (OriginalDocuments), foretages nu en indledningsvis validering af disse (tjekker for tomme mappe/filer, tilstedev\u00e6relsen af .zip-filer, andet?).</p> <p>Vi benytter digiarch til at foretage denne indledende validering af dokumenterne og strukturen i de enkelte docCollections. Kald process p\u00e5 den mappe, som arkiveringsversionen er kopieret til:</p> <pre><code>digiarch D:\\filer\\AVID.AARS.3.1 process\n</code></pre> <p>Dokumentationen til digiarch indeholder yderligere beskrivelser af, hvordan v\u00e6rkt\u00f8jet benyttes</p> <p>Digiarch producerer sin egen \"_metadata\"-mappe med en \"files.db\"-fil, som efter den indledningsvise test skal placeres i roden af \"OriginalDocuments\":</p> <pre><code>/AVID.AARS.3.1\n|-- _metadata/\n    |-- ADA_log-leverand\u00f8r.rtf\n    |-- status.txt\n    |-- ...\n|-- ContextDocumentation/\n|-- Indices/\n|-- Schemas/\n|-- Tables/\n|-- OriginalDocuments/\n    |-- _metadata/\n        |-- files.db\n    |-- docCollection1\n    |-- docCollection2\n    |-- ...\n</code></pre>"},{"location":"archival-versions/notes-arkivering/#kopiering-til-acastorage","title":"Kopiering til AcaStorage","text":"<p>Hvis resultatet af dokumentvalideringen ikke n\u00f8dvendigg\u00f8r en genaflevering, kopieres hele arkiveringsversionsmappen inkl. \"_metadata\"-mapperne til AcaStorage:</p> <ol> <li>\u00c5bn Microsoft Azure Storage Explorer</li> <li>Mappen med arkiveringsversionen kopieres nu samlet eller over flere omgange ind i f\u00f8lgende mappe: MKB {din mail}/Storage Accounts/acastorage/arkver/</li> </ol> <pre><code>/AVID.AARS.3.1\n|-- _metadata/\n    |-- ...\n|-- ContextDocumentation/\n|-- Indices/\n|-- Schemas/\n|-- Tables/\n|-- OriginalDocuments/\n    |-- _metadata/\n        |-- files.db\n    |-- docCollection1.zip\n    |-- docCollection2.zip\n</code></pre> <p>Vigtigt</p> <p>Al det test- og konverteringsarbejde, som f\u00f8lger, skal arbejde med den kopi af arkiveringsversionen, som nu ligger p\u00e5 AcaStorage. Den kopi af arkiveringsversionen, som f\u00f8rst blev kopieret ind i det lokale system, skal som n\u00e6vnt forblive uber\u00f8rt, s\u00e5 vi altid kan g\u00e5 tilbage til udgangspunktet.</p>"},{"location":"archival-versions/notes-arkivering/#identifikation-af-dokumenter","title":"Identifikation af dokumenter","text":"<p>Inden dokumentkonvertering foretages en grundig identifikation af de originale dokumenter. Dette g\u00f8res b\u00e5de for at fange s\u00e5 mange problemer (filendelser, tomme filer...) som muligt inden konverteringsprocessen, men ogs\u00e5 for at finde ud af, hvilket master-format en given fil skal konverteres til.</p> <p>Vi benytter endnu engang digiarch til at styre denne omst\u00e6ndige proces, som er n\u00e6rmere beskrevet her: dokumentation til digiarch.</p> <p>N\u00e5r alle fejl eller misforhold, som det har v\u00e6ret muligt at tilrette, er afhjulpet, st\u00e5r man tilbage med en filliste, hvor minimum en fil almindeligvis stadig vil v\u00e6re fejlbeh\u00e6ftet og dermed have en pronomID, som indikerer en af f\u00f8lgende fejltyper:</p> <ul> <li>filen er tom</li> <li>filen er korrupt</li> <li>filen er kodeordsbeskyttet</li> <li>filen er ikke genkendelig og dermed ikke identific\u00e9rbar</li> </ul>"},{"location":"archival-versions/notes-arkivering/#test-af-databasen","title":"Test af databasen","text":"<p>Afleveringen er nu klar til at blive testet i ADA. Denne proces er beskrevet under ADA-dokumentationen, og her skal blot n\u00e6vnes, at de logs, notater m.m., som m\u00e5tte blive produceret under testen, nu findes i \"_metadata\"-mappen i roden af den afleveringen, som ligger p\u00e5 AcaStorage.</p> <p>N\u00e5r ADA-testen er afsluttet og arkiveringsversionen kan godkendes, er det tid til at konvertere de originale dokumenter til Stadsarkivets \"master\"-formater.</p>"},{"location":"archival-versions/notes-arkivering/#konvertering-til-master-formater","title":"Konvertering til master-formater","text":"<p>Vi benytter convertool til at konvertere de originale dokumenter til master-formater. Denne proces er beskrevet i convertool-dokumentationen, og her skal blot n\u00e6vnes, at de konverterede dokumenter l\u00e6gges i samme struktur som de originale dokumenter, blot i mappen \"MasterDocuments\":</p> <pre><code>/AVID.AARS.3.1\n|-- _metadata/\n    |-- ADA_log-leverand\u00f8r.rtf\n    |-- ADA_log-test.rtf\n    |-- test-notat.txt\n    |-- status.txt\n|-- ContextDocumentation/\n|-- Indices/\n|-- Schemas/\n|-- Tables/\n|-- OriginalDocuments/\n    |-- _metadata/\n        |-- files.db\n    |-- docCollection1/\n    |-- docCollection2/\n|-- MasterDocuments/\n    |-- _metadata/\n        |-- files.db\n    |-- docCollection1/\n    |-- docCollection2/\n</code></pre> <p>Filerne testes og fejlrettes med digiarch, og databasen testes med ADA. De to processer er uafh\u00e6ngige af hinanden og kan derfor k\u00f8res b\u00e5de separat og parallelt.</p>"},{"location":"archival-versions/notes-arkivering/#konvertering-til-arkiv-formater","title":"Konvertering til arkiv-formater","text":"<p>N\u00e5r b\u00e5de databasen og dokumenterne er gennemarbejdet og kan godkendes, konverteres master-dokumenterne slutteligt til arkiv-formater (tiff, jpeg2000, MPEG..). Igen benyttes convertool, og igen l\u00e6gges de konverterede filer i samme struktur som de originale dokumenter, blot i mappen \"Documents\":</p> <pre><code>/AVID.AARS.3.1\n|-- _metadata/\n    |-- ADA_log-leverand\u00f8r.rtf\n    |-- ADA_log-test.rtf\n    |-- test-notat.txt\n    |-- status.txt\n|-- ContextDocumentation/\n|-- Indices/\n|-- Schemas/\n|-- Tables/\n|-- OriginalDocuments/\n    |-- _metadata/\n        |-- files.db\n    |-- docCollection1/\n    |-- docCollection2/\n|-- MasterDocuments/\n    |-- _metadata/\n        |-- files.db\n    |-- docCollection1/\n    |-- docCollection2/\n|-- Documents/\n    |-- _metadata/\n        |-- files.db\n    |-- docCollection1/\n    |-- docCollection2/\n</code></pre>"},{"location":"archival-versions/notes-arkivering/#godkendelse-af-arkiveringsversion","title":"Godkendelse af arkiveringsversion","text":"<p>Efter succesrig dokumentkonvertering afsluttes processen p\u00e5 f\u00f8lgende vis:</p> <ol> <li>Det overordnede Notes-statusdokument p\u00e5 OneDrive opdateres med de relevante informationer </li> <li>Hele mappen med arkiveringsversionen (\"AVID.AARS.3.1\\\") kopieres til \"arkvers\"-mappen p\u00e5 funktionsdrevet:     <pre><code>C:\\Users\\{az-ident}\\Aarhus kommune\\FNK-Aarhus Stadsarkiv - Dokumenter\\arkvers\\\n</code></pre></li> <li>Improvento informeres i en mail om godkendelsen</li> <li>Den relevante magistratsafdeling informeres i en mail om godkendelsen</li> </ol>"},{"location":"development/","title":"Development","text":"<p>...</p>"},{"location":"development/convertool_workflow/","title":"At udvikle p\u00e5 convertool","text":"<p>Convertool er vores eneste v\u00e6rkt\u00f8j som k\u00f8re inde i en Docker container. Denne guide vil beskrive hvordan man nemmest tilknytter VS Code s\u00e5dan at man kan udvikle, teste og debugge v\u00e6rkt\u00f8jet mens det k\u00f8re inde i containeren, uden at man beh\u00f8ver at genbygge containeren o.l.</p>"},{"location":"development/convertool_workflow/#executive-summary","title":"Executive summary:","text":"<ol> <li>Start docker containeren med kommandoen: <code>docker run -it -v [sti_til_lokal_kopi_convertool]:/root/convertool --name convertool --rm convertool</code></li> <li>\u00c5ben et tomt VS Code vindue</li> <li>\u00c5ben command-pallette (CTRL+SHIFT+p)</li> <li>V\u00e6lg kommandoen <code>Dev containers: Attach to running container...</code> </li> <li>Den k\u00f8rende convertool container skulle kunne findes. V\u00e6lg den. </li> </ol> <p>Du har nu alt VS Code functionalitet inde i en container, og dine lokale \u00e6ndringer opdateres p\u00e5 din egen maskines lokale kopi.</p>"},{"location":"development/convertool_workflow/#udvikle-inde-i-en-docker-container-den-lange-forklaring","title":"Udvikle inde i en Docker container, den lange forklaring","text":"<p>F\u00f8rst skal Docker billedet bygges. Se Docker guiden for at se hvordan man bygger et billede og bruger docker p\u00e5 et basalt niveau.</p> <p>N\u00e5r billedet er bygget skal starter vi en container baseret p\u00e5 det. Her skal vi bruge <code>docker run</code> kommandoen, men vi skal sikre os at vi for indsat (mounted) de rigtige mapper fra vores egen maskine ind i containeren. Mappen med convertool koden vigtig at f\u00e5 mounted, da det ellers bliver b\u00f8vlet at rette i koden efter at containeren er startet. Vi mounter mapper med <code>-v</code> flaget, det tillader os at lave et link mellem en af vores lokale mapper og en mappe i docker containeren. Vi giver den disse parametre ved at skrive </p> <p><code>docker run -v [abselout_sti_til_mappe_p\u00e5_pc]:[mappe_i_container]</code></p> <p>Hvis vi f.eks. havde vores lokale kopi af convertool gemt under stien <code>C:\\development\\github\\convertool</code>, s\u00e5 kan vi lavet et link til mappen i containeren ved at skrive </p> <p><code>docker run -v C:\\\\development\\\\github\\\\convertool:/root/convertool</code>.</p> <p>Hvis vi \u00f8nsker at havde adgang til flere mapper, f.eks. en mappe med data til manuelle test o.l. s\u00e5 skriver vi blot flere <code>-v</code> flag i <code>docker run</code> kaldet.</p> <p>[TBD]</p>"},{"location":"development/convertool_workflow/#at-debugge-i-en-docker-container","title":"At debugge i en docker container","text":"<p>VS Codes inbyggede debugger er et st\u00e6rkt v\u00e6rkt\u00f8j til at finde fejl i ens kode. For at bruge den i en dokker container skal din VS Code v\u00e6re tilknyttet containeren som beskrevet f\u00f8r.</p> <p>Da de fleste af vores v\u00e6rkt\u00f8jer er CLI-baseret, kan det g\u00f8re en debug sessions sv\u00e6r. Det nemmeste er f\u00f8lgende: 1. Lav en <code>debug.py</code> file i test mappen hvor de kalder CLI'en med de parametre du gerne vil teste. Se convertool's <code>debug.py</code> for et eksempel 2. \u00c5ben vscodes <code>debug</code> panel. Her vil der v\u00e6re en prompt der sp\u00f8rger dig om du vil lave en launch.json fil, g\u00f8r det 3. I den nye prompt, v\u00e6lg python file. Du for s\u00e5 en standard python file template du kan definere en dbug session i. 4. Definer f\u00f8lgende attributer i filen s\u00e5ledes:     <pre><code>\"name\": \"Python: debug\",\n\"type\": \"python\",\n\"request\": \"launch\",\n\"program\": \"AbseloutStiTilTestMappen/debug.py\",\n\"justMyCode\": true\n</code></pre> 5. K\u00f8r debug scriptet i vscode</p> <p>Der er andre mere modelerbare m\u00e5der at k\u00f8re det p\u00e5, men erfaring fort\u00e6ller at de er mindre robuste og er mere error-prone i et container-enviroment.</p>"},{"location":"development/docker/","title":"Docker","text":""},{"location":"development/git/","title":"Git","text":""},{"location":"development/git_workflow/","title":"Git og Github workflow","text":"<p>Denne side vil gennemg\u00e5 hvordan man arbejder med Git og GitHub. Gennemgangen er delt op i tre dele: 1. En basal gennemgang af Git og GitHub    2. Hvordan man arbejder med kode fra GitHub.  3. Hvordan man gennemg\u00e5r (reviewer) andres pull-request, kommer med kommentare og \u00e6ndringsforslag.</p>"},{"location":"development/git_workflow/#git-og-github","title":"Git og GitHub","text":"<p>Git er et v\u00e6rkt\u00f8j, som hj\u00e6lper med versionskontrol af softwareudvikling. Git g\u00f8r det muligt altid at havde et klart overblik over hvor man er i udviklingen af ens produkt. Den tillader ogs\u00e5 en altid at g\u00e5 tilbage til tidligere versioner af ens kode og lave forskellige 'forgreninger' (branches) af ens kode, som kan indeholde forskellige features, \u00e6ndringer og forbedringer, som ikke er klar til at blive en del af det endelige produkt. GitHub er en online tjeneste, som hoster ens Git repositories (se nedenfor) og tillader at man kan arbejde p\u00e5 samme kode-base og l\u00f8se udfordringer med versioner, overskrivning af andres kode og hvilken kode man skal bruge n\u00e5r 2 har arbejdet p\u00e5 det samme. Samtidig er det muligt for andre at gennemg\u00e5 ens \u00e6ndringer, inden de bliver en del af det endelige produkt, som sikre kvalitet i det f\u00e6rdige arbejde.</p> <p>Takeaway: Git er et v\u00e6rkt\u00f8j, som hj\u00e6lper med softwareudvikling og versionskontrol. GitHub er en online service der benytter Git, som g\u00f8r at man kan samarbejde om at udvikle.</p>"},{"location":"development/git_workflow/#terminologi","title":"Terminologi","text":"<p>Git og GitHub har deres egen terminologi. Herunder er en kort forklaring af de vigtigste koncepter. GitHub har ogs\u00e5 selv en ordbog, som kan findes ved dette link.</p> <ul> <li>Repository (oftest forkortet til Repo): Det mest essentielle element ved GitHub. Her er alle de filer som er knyttet til det projekt man arbejder p\u00e5. Man kan se det som den mappe projektet er gemt i.</li> <li>Branch: En kopi af det kode der er p\u00e5 ens repo, som man kan \u00e6ndre og modificerer frit. Repo'et best\u00e5r oftest af en enkelt Master eller Main branch som er den hvor den 'f\u00e6rdige' version af koden er p\u00e5. Andre branches laves s\u00e5 n\u00e5r man vil modificerer og forberdre denne, og p\u00e5 disse klan man frit eksperimentere (og fejle) inden man kommer frem til et funktionelt produkt.</li> <li>Pull-Request: N\u00e5r man er tilfreds med det kode man har tilf\u00f8jet p\u00e5 en branch og mener det skal v\u00e6re en del af det Main/Master branchen s\u00e5dan det kan komme ud og blive brugt, opretter man en Pull-Request. N\u00e5r den godkendes (oftest af en anden end den der har skrevet koden), vil det nye kode eller andre \u00e6ndringer bliver tilf\u00f8jet til Main/Master branchen. Navnet Pull-Request er lidt d\u00e5rligt, fordi man oftest bruger pull som en git kommando, hvor man henter filer ned fra en server (oftest GitHub). Det skal forst\u00e5es som at Main/Master beder om tilladelse til at hente (pull) koden fra den anden branch.</li> </ul>"},{"location":"development/git_workflow/#workflow-udvikling","title":"Workflow: udvikling","text":"<p>Herunder er workflowet for, hvordan vi arbejder p\u00e5 et repo beskrevet. Det er delt op i fem punkter, som alle beskriver en separat del af processen. Under hvert punkt er en h\u00f8jniveaubeskrivelse af selve processen. Derefter f\u00f8lger en forklaring.</p>"},{"location":"development/git_workflow/#1-clone","title":"1. Clone","text":"<p>Du skal sikre dig at du altid clone'er fra 'Main' (medmindre du skal arbejde videre p\u00e5 en anden branch). N\u00e5r du har sat et repository op lokalt, opret eller skift over til den branch som du gerne vil arbejde p\u00e5. S\u00f8rg for at branchen er navngivet hensigtsm\u00e6ssigt, s\u00e5dan man hurtigt kan se hvad der udvikles p\u00e5 den. 'feature' eller 'bug_fix' fort\u00e6ller ikke nogen hvilke \u00e6ndringer der laves.</p>"},{"location":"development/git_workflow/#2-code","title":"2. Code","text":"<p>Implementer dine \u00e6ndringer/features. Her er der flere ting man skal v\u00e6re opm\u00e6rksom p\u00e5. - S\u00f8rg for at dine \u00e6ndringer passer med den branch du er p\u00e5. Hvis du g\u00e5r i gang med at implementerer en ny feature p\u00e5 en branch der er der for at fixe en bug, s\u00e5 skift enten  branch, opret en ny branch, eller opret en feature request til senere. - Husk at k\u00f8re de relevante tests, og tjek at din kode faktisk fungerer.</p> <ul> <li> <p>Hold din implementering p\u00e5 et minimum. N\u00e5r koden virker og opfylder alle test, s\u00e5 lad som udgangspunkt v\u00e6re med at tilf\u00f8je mere til denne commit. Lav en pull-request p\u00e5 din nuv\u00e6rende version, og find derefter ud af om du skal arbejde videre p\u00e5 den branch eller en ny.</p> </li> <li> <p>S\u00f8rg for at k\u00f8re linting p\u00e5 koden, s\u00e5dan den opfylder best-practices i forhold til stil og formatering. I Python scripts g\u00f8res det ved at k\u00f8re black, flake8 og derefter mypy, hvis du har skrevet din kode med typehints (hvilket anbefales).</p> </li> </ul>"},{"location":"development/git_workflow/#3-commit","title":"3. Commit","text":"<p>Commit derefter dine \u00e6ndringer. Hold dine commits sm\u00e5 og overskuelige. Hvis du laver flere commits p\u00e5 den samme pull-request, s\u00e5 lav commits gradvist. Det er langt mere overskueligt for revieweren med 3 sm\u00e5 commits end 1 stor, der \u00e6ndrer i flere forskellige aspekter af repo'et.</p> <p>HUSK at k\u00f8re linting og lignende inden du committer!</p>"},{"location":"development/git_workflow/#4-push","title":"4. Push","text":"<p>Push dine \u00e6ndringer op til GitHub.</p>"},{"location":"development/git_workflow/#5-pull-request","title":"5. Pull-request","text":"<p>Opret en pull-request.  - Assign gerne med det samme en reviewer, s\u00e5dan at vedkommende hurtigt kan kigge p\u00e5 koden.  - Hvis man specifikt adresserer en issue eller feature request, s\u00e5 skriv Id'et i pull-requesten eller tilf\u00f8j det under <code>development</code>.</p>"},{"location":"development/git_workflow/#workflow-review-af-andres-kode","title":"Workflow: Review af andres kode","text":"<p>Herunder beskrives hvordan man mest hensigtm\u00e6ssigt tjekker andres kode. </p> <p>=======</p> <p>Opret en pull-request. Assign gerne med det samme en reviewer, s\u00e5dan personen hurtigt kan kigge p\u00e5 koden. Hvis man specifikt adresserer en issue eller feature request, s\u00e5 skriv Id'et i pull-requesten.</p>"},{"location":"development/git_workflow/#workflow-review-af-andres-kode_1","title":"Workflow: Review af andres kode","text":"<p>Herunder beskrives hvordan man mest hensigtm\u00e6ssigt tjekker andres kode. </p>"},{"location":"development/github/","title":"Github","text":"<p>Aarhus Stadsarkiv bruger Github som udviklingsplatform. Det betyder, at kildekoden til de fleste af vores projekter ligger p\u00e5 Github, men det betyder ogs\u00e5, at vi gerne vil have fejlmeldinger, udviklings\u00f8nsker m.m. til at ligge sammen med projekterne.</p>"},{"location":"development/github/#oprettelse-af-github-konto","title":"Oprettelse af Github-konto","text":"<p>For at kunne fejlmelde problemer eller aflevere udviklings\u00f8nsker til de projekter, som medarbejderne benytter, skal du v\u00e6re oprettet som bruger af Github og knyttet stadsarkivets github-organisation.</p> <p>Du kan oprette dig som bruger her. Brugernavn og kode m\u00e5 du frit v\u00e6lge, men du skal bruge din arbejdsmail(...@aarhus.dk).</p> <p>N\u00e5r du er oprettet som bruger, skal du meddele en fra it-teamet, at du gerne vil knyttes til Aarhus Stadsarkivs github-organisation. Vi kobler dig p\u00e5 organisationen, og du kan nu foretage indberetninger p\u00e5 de projekter, som stadsarkivet har liggende p\u00e5 github.</p>"},{"location":"development/github/#indberetninger","title":"Indberetninger","text":"<p>Indberetninger af fejl, udviklings\u00f8nsker, sm\u00e5\u00e6ndringer eller andet foreg\u00e5r ved at oprette s\u00e5kaldte issues p\u00e5 Github-siden for det relevante projekt. Github har selv en udf\u00f8rlig dokumentation af, hvordan man arbejder med \"issues\", men herunder er beskrevet de mest mest almindelige brugsscenarier, som medarbejderen vil m\u00f8de.</p> <p>Bem\u00e6rk</p> <p>Det er ikke alle Stadsarkivets services og v\u00e6rkt\u00f8jer, der har en Github-side. I disse tilf\u00e6lde indberettes blot via mail.</p> <p>Bem\u00e6rk</p> <p>For at oprette issues, skal man som n\u00e6vnt v\u00e6re oprettet som bruger af github. F\u00f8lg denne vejledning, hvis du ikke allerede er oprettet.</p> <p>Her er indledningsvis en liste med links til indberetningssider for de mest \"popul\u00e6re\" projekter:</p> <ul> <li>AarhusArkivet</li> <li>SAM</li> <li>SAM-workflows</li> <li>AarhusWiki</li> </ul>"},{"location":"development/github/#vlg-indberetning","title":"V\u00e6lg indberetning","text":"<p>I de f\u00f8lgende afsnit vises nogle sk\u00e6rmbilleder fra forskellige projekters issue-sider. Disse er kun medtaget som eksempel, og de enkelte projekters sider kan se anderledes ud.</p> <p>N\u00e5r man st\u00e5r p\u00e5 et projekts issue-side, skal man klikke p\u00e5 \"Get started\" ud for det \u00f8nskede skabelon:</p> <p></p> <p>Der \u00e5bnes nu en ny side, som skal udfyldes med de relevante informationer, der knytter sig til denne specifikke skabelon. En fejlmeddelelse ser eksempelvis cirka s\u00e5dan ud:</p> <p></p>"},{"location":"development/github/#udfyld-indberetning","title":"Udfyld indberetning","text":"<p>Alle issues skal have en meningsfyldt titel, men herforuden vil der for de enkelte isssue-skabeloner v\u00e6re en r\u00e6kke specifikke punkter, som man kan besvare. Ved fejlmeldinger vil vi eksempelvis gerne have beskrevet fejlen, samt angivet hvordan fejlen om muligt kan reproduceres.</p> <p>Bem\u00e6rk</p> <p>Tekstfeltet, hvori et issue skal beskrives, indeholder allerede noget template-tekst, hvis syntaks kan se lidt ukendt ud. Det hedder markdown og er bare en simpel m\u00e5de, hvorp\u00e5 man kan arbejde med basale formateringer (fed skrift, links, lister...).</p> <p>Hvis man er usikker p\u00e5 brugen heraf, benytter man bare den genkendelige v\u00e6rkt\u00f8jslinje over feltet:</p> <p></p> <p>Man kan eogs\u00e5 l\u00f8bende se, hvordan ens issue kommer til at se ud, ved at klikke p\u00e5 \"Preview\"-fanen.</p>"},{"location":"development/github/#gem-indberetning","title":"Gem indberetning","text":"<p>N\u00e5r man er f\u00e6rdig med sin beskrivelse, trykkes \"Submit new issue\". Indberetningen vil nu v\u00e6re at finde p\u00e5 listen over aktive issues, som er knyttet til AarhusArkivet:</p> <p></p>"},{"location":"development/github/#statusopdateringer","title":"Statusopdateringer","text":"<p>N\u00e5r man f\u00f8rste gang har gemt en indberetning, bliver man automatisk notificeret via mail omkring enhver \u00e6ndring til denne indberetning.</p>"},{"location":"development/github/#rediger-indberetning","title":"Redig\u00e9r indberetning","text":""},{"location":"development/github/#rediger-issue-titlen","title":"Redig\u00e9r issue-titlen","text":"<p>Man kan altid redigere i issues, som man selv har oprettet. Hvis man \u00f8nsker at \u00e6ndre titlen p\u00e5 sin indberetning, klikker man blot p\u00e5 \"Edit\"-knappen til h\u00f8re for titlen:</p> <p></p>"},{"location":"development/github/#rediger-issue-teksten","title":"Redig\u00e9r issue-teksten","text":"<p>Hvis man derimod \u00f8nsker at \u00e6ndre selve indholdet i indberetningen, g\u00e5r man blot ind p\u00e5 den side, som viser det \u00f8nskede issue, og klikker p\u00e5 de tre prikker over tekstfeltet og v\u00e6lger \"edit\":</p> <p></p> <p>Foretag dine redigeringer og tryk p\u00e5 \"Update Comment\". Dine \u00e6ndringer er nu gemt.</p>"},{"location":"development/github/#kommenter-pa-indberetning","title":"Komment\u00e9r p\u00e5 indberetning","text":"<p>Det er muligt at kommentere p\u00e5 b\u00e5de egne eller andres issues. Er der tale om egne indberetninger, vil man ofte blot redigere selve indberetningen, men andre medarbejderes indberetninger har man ikke adgang til at redigere.</p> <p>For at kommentere p\u00e5 en indberetning, skriver man blot sin kommentar i kommentarfeltet under det aktuelle issue (og eventuelle tidligere kommentarer i tr\u00e5den):</p> <p></p> <p>Afslut med at klikke p\u00e5 \"Comment\". Man kan ogs\u00e5 afslutte ved at klikke p\u00e5 \"Close with comment\", men det lukker indberetningen. Lukning af en indberetning, kan du l\u00e6se mere om nedenfor.</p>"},{"location":"development/github/#luk-en-indberetning","title":"Luk en indberetning","text":"<p>Man kan altid lukke en af sine egne indberetninger. M\u00e5ske fordi den blev oprettet som en fejl eller er blevet l\u00f8st. N\u00e5r man lukker en indberetning, skal man huske at angive grunden hertil i kommentarfeltet inden man lukker indberetningen ved at klikke p\u00e5 \"Close with Comment\" (se ovenst\u00e5ende billede).</p>"},{"location":"development/github_actions/","title":"Githubs <code>actions</code> og CI","text":"<p>Her kan du finde nogle korte beskrivelser af: - Hvad man kan bruge GH <code>actions</code> til - Hvordan man kan tilpasse dem s\u00e5dan de passer til det specifikke repo - Hvad og hvordan vi betaler for at bruge actions - etc.</p>"},{"location":"development/github_actions/#hvad-gr-en-github-action","title":"Hvad g\u00f8r en github action?","text":"<p>Med en action p\u00e5 GH er det muligt at k\u00f8re kode direkte p\u00e5  GitHub. Vi benytter prim\u00e6rt <code>actions</code> til at k\u00f8re CI (continuos development) test, der sikre os at vores \u00e6ndringer ikke \u00f8del\u00e6gger funktionaliteten i koden. Vi k\u00f8re os andre tjek s\u00e5som lintin, der s\u00f8rger for koden er skrevet efter best-practices og codecoverage, der s\u00f8rger for at vores test tester s\u00e5 h\u00f8j en del af koden som muligt. Ud over det er det ogs\u00e5 muligt at: - Automatisere pull-request og review requests. - Skabe overblik med automatisk logning og monitorering af projekter. - etc.</p>"},{"location":"development/github_actions/#tilpas-gh-actions","title":"Tilpas GH actions","text":"<p>En GH <code>actions</code> k\u00f8re i et GH workflow. Et workflow kan best\u00e5 af en eller flere actions/mindre scripts. Dette Workflow k\u00f8re hvergang en predefinetet event bliver triggered i et repository. Disse events kan v\u00e6re alle former for \u00e6ndringer som kan finde sted p\u00e5 GH. F.eks. kan man s\u00e6tte <code>actions</code> op til at k\u00f8re hvergang en pull-request bliver \u00e5bnet/lukket, hvergang en pull-request bliver godkendt (og inden den bliver merged) eller bare hvergang der pushes \u00e6ndringer op til branchen. For mere l\u00e6sning se GitHubs egen documentation Hver workflow k\u00f8re en eller flere runners som er hver sin VM. Disse runners k\u00f8re et eller flere job, som er en samling af <code>actions</code> og scripts. Det er muligt at betinge k\u00f8rslen af et job, s\u00e5dan det enten afh\u00e6nger af at et andet job er k\u00f8rt f\u00f8rst, eller at jobbet kun k\u00f8re p\u00e5 en bestemt branch. Det er muligt at bruge et workflow i et andet workflow [[TODO]]: Beskriv hvordan</p>"},{"location":"development/github_actions/#hva-kostered","title":"Hva koster'ed?","text":"<p>Vi har omkring 3.000 minuters computertid til r\u00e5dighed. Hver pull-request vi laver koster mellem 5-10 minutter, og hvis vi bruger det koster hvert ekstra minut i 'overage' 0.008 dollars. Vi kan altid tjekke vores forbrug under settings, se denne guide for hvordan. </p>"},{"location":"development/github_actions/#side-spring-kort-introduktion-til-yaml","title":"Side spring: Kort introduktion til YAML","text":"<p><code>actions</code> skrives YAML formatet (enten .yml eller .yaml). Det er et meget bredt format, som har en meget human-readable syntax, men hvis man ikke er vant til det kan man finde introduktioner her: - L\u00e6r yaml p\u00e5 5 min - Githubs egen documentation for deres brug, med mange gode eksempler.</p>"},{"location":"development/github_actions/#kendte-problemer","title":"Kendte problemer","text":""},{"location":"development/github_actions/#et-required-github-check-bliver-ikke-krt-pa-trods-af-at-der-kre-actions","title":"Et <code>required</code> GitHub check bliver ikke k\u00f8rt, p\u00e5 trods af at der k\u00f8re actions","text":"<p>Her er der 2 mulige fejl:  Enten bliver der p\u00e5g\u00e6ldende check ikke k\u00f8rt i de <code>actions</code> man har, og derfor venter GH p\u00e5 rm form for respons p\u00e5 checket, som aldrig kommer. Det kan l\u00f8ses ved at tilf\u00f8je checket til de <code>actions</code> man k\u00f8re. Hvis checket allerede k\u00f8re som en del af de <code>actions</code> manj k\u00f8re, kan fejlen v\u00e6re at GH ikke genkender det chek man k\u00f8re som det <code>required</code> check den leder efter. Se f\u00f8lgende issue for en forklaring. Man kan l\u00f8se det ved at: - G\u00e5 ind i settings p\u00e5 repo'et (kr\u00e6ver admin privilegier) - G\u00e5 under <code>branches</code> -&gt; <code>branch protection rules</code>. Her er en liste af de <code>required</code> checks der skal til for at godkende en <code>pull-request</code> - Fjern det check GH ikke kan f\u00e5 godkendt, og s\u00f8g efter nylige k\u00f8rte <code>actions</code>. V\u00e6lg den <code>action</code> du mener k\u00f8re det p\u00e5g\u00e6ldende check. GH er meget emsig med hvilke <code>actions</code> der opfylde hvilke checks, s\u00e5 selv sm\u00e5 \u00e6ndringer i indhold eller navn kan skabe problemer</p>"},{"location":"development/roadmap/","title":"Roadmap","text":""},{"location":"development/roadmap/#arkiveringsversioner","title":"Arkiveringsversioner","text":""},{"location":"development/roadmap/#intern-produktion","title":"Intern produktion","text":"<ul> <li>Kingo PPR</li> <li>Aarhus Havn</li> <li>eDoc</li> <li>DAOS</li> <li>AffaldVarme</li> <li>Aarhus Vand</li> </ul>"},{"location":"development/roadmap/#ekstern-levering","title":"Ekstern levering","text":"<ul> <li>CSC Social</li> <li>CSC Vitae Omsorg</li> <li>TM Sund</li> <li>KMD Sag</li> <li>Kingo Kommunikation</li> </ul>"},{"location":"development/roadmap/#dokumentation","title":"Dokumentation","text":"<p>F\u00e6rdigg\u00f8r dokumentation m.m. for b\u00e5de eksterne leverancer og interne produktioner. - contextdocumentationindex - archiveindex - sql-foresp\u00f8rgsler for alle AVID'er (gennemtestede)   - inkl. foresp\u00f8rgsel, der henter AL data p\u00e5 en borger - slettelister (til forvaltningerne)</p>"},{"location":"development/roadmap/#test","title":"Test","text":"<p>ADA test af alle F\u00c6RDIGE arkiveringsversioner.</p>"},{"location":"development/roadmap/#registrering","title":"Registrering","text":"<ol> <li>Lave og publicere lister over indhold (avid, avid-titel, org. enhed, startdato, tildato)</li> <li>Registrere alle AVID'er</li> </ol>"},{"location":"development/roadmap/#tilgngeliggrelse","title":"Tilg\u00e6ngeligg\u00f8relse","text":"<ol> <li>Blanketter/formularer til udfyldelse ved data-foresp\u00f8rgsler.</li> <li>Html-pakker eller lignende til udlevering ved foresp\u00f8rgsler, b\u00e5de personlige og emnem\u00e6ssige.</li> </ol>"},{"location":"development/roadmap/#scripts","title":"Scripts","text":"<ul> <li>add_context_doc.py (inkl. mulighed for at inds\u00e6tte p\u00e5 en bestemt plads (id))</li> <li>remove_context_doc.py</li> <li>convert_single_file_to_compressed_tif.py</li> <li>copy files from docCollections in reponse to data-export from an avid</li> <li>upload/download files to azure</li> <li>generate json/xml files from sql-query output from a request for data in an AVID</li> </ul>"},{"location":"development/roadmap/#digiarch","title":"Digiarch","text":"<p>Skal v\u00e6re dokumenteret omkring: hvad det er, installation, files.db, warnings-betydninger, hvad g\u00f8res ved fejl af alle type, hvordan fejlrettes, hvordan dokumenteres processen i status.txt, hvordan og hvorn\u00e5r opdateres digiarch, hvordan opdateres json-filerne, hvordan publiceres nye releases?</p>"},{"location":"development/roadmap/#convertool","title":"Convertool","text":"<ol> <li>Integration af GIS- og CAD-konvertering</li> <li>Skal v\u00e6re dokumenteret omkring: hvad det er, installation, files.db, warnings-betydninger, hvad g\u00f8res ved fejl af alle type, hvordan fejlrettes, hvordan dokumenteres processen i status.txt, hvordan og hvorn\u00e5r opdateres digiarch, hvordan opdateres json-filerne, hvordan publiceres nye releases?</li> </ol>"},{"location":"development/roadmap/#digitalt-arkiv","title":"Digitalt Arkiv","text":"<ol> <li>Webservice, hvorigennem ALLE kald (med tid) skal foretages (FastAPI)</li> <li>database (PG)</li> <li>s\u00f8gemaskine (ElasticSearch)</li> <li>filserver </li> <li>brugerfunktionalitet</li> <li>lager- og ordrestyring</li> <li>Storage (diskarray)</li> </ol>"},{"location":"development/roadmap/#projekter","title":"Projekter","text":""},{"location":"development/roadmap/#smartarkivering","title":"Smartarkivering","text":"<p>Lancering af smartarkivering.dk med mulighed for aflevering til b\u00e5de os, Aalborg og Kolding.</p>"},{"location":"development/roadmap/#byradsarkivet","title":"Byr\u00e5dsarkivet","text":"<p>Bearbejdning og integration af 2022-data og -dokumenter.</p>"},{"location":"development/roadmap/#adhoc","title":"Adhoc","text":"<ul> <li>overf\u00f8r billeder til Aarhusbilleder via API</li> <li>https://www.e-pics.ethz.ch/CIP/doc/CIP.htm (CIP Documentation)</li> </ul>"},{"location":"development/wsl/","title":"Windows Subsystem for Linux (WSL)","text":""},{"location":"development/python/pyinstaller/","title":"PyInstaller","text":"<p>Herunder f\u00f8lger en kort guide til PyInstaller, som p\u00e5 Aarhus Stadsarkiv bruges til at generere eksekverbare filer af forskellige v\u00e6rkt\u00f8jer.</p>"},{"location":"development/python/pyinstaller/#installation","title":"Installation","text":"<p><code>PyInstaller</code> skal installeres p\u00e5 lige fod med andre dependencies via <code>poetry</code>. Der er tale om en development dependency, og derfor er kaldet som f\u00f8lger.</p> <pre><code>poetry add pyinstaller --dev\n</code></pre>"},{"location":"development/python/pyinstaller/#kompilering","title":"Kompilering","text":"<p>N\u00e5r <code>PyInstaller</code> skal kompilere, skal den kaldes i det virtuelle environment, s\u00e5ledes alle dependencies kan findes.</p> <pre><code>poetry run pyinstaller [OPTIONS] [ARGS]\n</code></pre> <p>De oftest brugte optioner er <code>-F</code> og <code>-w</code>. <code>-F</code> angiver, at der skal kompileres til en enkelt fil, mens <code>-w</code> angiver windowed mode. </p> <pre><code>poetry run pyinstaller -F -w [ARGS]\n</code></pre> <p>Det er vigtigt, at PyInstaller kaldes direkte fra det directory, hvori <code>main.py</code> eller \u00e6kvivalent befinder sig.</p> <pre><code>cd path\\to\\main\npoetry run pyinstaller -F -w main.py\n</code></pre> <p>N\u00e5r PyInstaller har k\u00f8rt f\u00f8rste gang, genereres en <code>.spec</code>-fil. Denne fil kan benyttes til finpudsning af kompileringsprocessen: det er blandt andet muligt at angive specifikke ikoner mv. Hvis man beslutter sig for at bruge <code>.spec</code>-filen fremover, skal den under source control, og PyInstaller skal kaldes med filen som f\u00f8lger.</p> <pre><code>cd path\\to\\specfile\npoetry run pyinstaller specfile.spec\n</code></pre>"},{"location":"development/python/pyinstaller/#debugging","title":"Debugging","text":"<p>Generelt er det nemmest at debugge ved at undg\u00e5 at bruge windowed mode, og k\u00f8re den resulterende <code>.exe</code>-fil via PowerShell. </p> <pre><code>## debug\ncd path\\to\\main\npoetry run pyinstaller -F main.py\ndist\\main.exe\n</code></pre> <p>Til tider virker windowed mode ikke p\u00e5 Windows overhovedet. I s\u00e5 tilf\u00e6lde m\u00e5 man n\u00f8jes med at kompilere til \u00e9n fil, og leve med, at et lille PowerShell vindue dukker op bag programmet.</p>"},{"location":"development/python/python-repos/","title":"Python repositories","text":"<ul> <li> <p>download python from python homepage</p> </li> <li> <p>all python-repo use pyproject.toml and poetry (remember to add [tool.poetry.scripts] for pipx to work)</p> </li> <li>black, flake8 and mypy are not added as dev-dependencies, but installed globally.</li> <li>write a lint-script the calls the globally installed black, flake8 and mypy commands.</li> <li>use github actions to check linting</li> <li> <p>use pytest for testing</p> </li> <li> <p>use pipx to install all global clis:</p> </li> <li>poetry</li> <li>black</li> <li>flake8</li> <li>mypy</li> <li>renamer</li> <li>unarchiver</li> <li>digiarch</li> <li>symphovert</li> <li>pytest</li> </ul>"},{"location":"digitization/","title":"Index","text":""},{"location":"digitization/#alt-om-digitaliering-af-analog-materiale","title":"Alt om digitaliering af analog materiale","text":""},{"location":"dissemination/","title":"Index","text":""},{"location":"dissemination/#alt-om-tilgngeliggrelse","title":"Alt om tilg\u00e6ngeligg\u00f8relse","text":""},{"location":"documents/","title":"Index","text":""},{"location":"documents/#blanketter","title":"Blanketter","text":"<p>aktindsigt, tavshedspligt, ophavsret, afleveringsaftale, </p>"},{"location":"manuals/synology/new_user/","title":"Opret ny bruger","text":"<ol> <li>\u00c5bn nas.home.arpa:5000 i browseren.</li> <li>Login som administrator (sp\u00f8rge efter adgangskode)</li> <li>\u00c5bn \"Kontrolpanel\" </li> <li>\u00c5bn \"Bruger og gruppe\" </li> <li>Klik p\u00e5 \"Opret\" &gt; \"Opret bruger\" </li> <li>Indtast oplysningerne <ul> <li>Navn: azID</li> <li>Beskrivelse: fuldt navn</li> <li>E-mail: aarhus.dk mail</li> <li>Adgangskode: password</li> </ul> </li> <li>Tilf\u00f8j gruppe \"administrators\" og \"stadsarkivet\" </li> <li>Tilf\u00f8j \"L\u00e6se/skriv\" adgang til stadsarkivet </li> <li>Spring over \"Brugerkvote\" side</li> <li>Tilf\u00f8j alle tilladelser </li> <li>Spring over brugerhastighedsgr\u00e6nse</li> <li>Bekr\u00e6ft oplysningerne og klik p\u00e5 \"Udf\u00f8rt\"</li> </ol>"},{"location":"manuals/synology/ssh_access/","title":"SSH-adgang","text":"<ol> <li>\u00c5bn terminalen</li> <li>Kopi personlig SSH-n\u00f8gle til NAS (brug brugeren azID)</li> </ol> <pre><code>ssh-copy-id az00000@nas.home.arpa\n</code></pre> <ol> <li>Login med SSH (brug brugeren azID)</li> </ol> <pre><code>ssh az00000@nas.home.arpa\n</code></pre> <ol> <li>Skift brugerens hjemmemappens adgangsniveau</li> </ol> <pre><code>chmod 755 ~\n</code></pre> <ol> <li>Log ud</li> </ol>"},{"location":"preservation/","title":"Index","text":""},{"location":"preservation/#alt-om-bevaring","title":"Alt om bevaring","text":""},{"location":"processes/convert-files-to-tif/","title":"Convert files to tif","text":"<p>I dette sidste trin skal afleveringen k\u00f8res gennem en r\u00e6kke kommandoer f\u00f8r slutresultat af afleveringen vil v\u00e6re i et myndighedsgodkendt format.</p> <p>M\u00e5let for det sidste trin er at k\u00f8re kommandoen <code>statutory</code> Foruds\u00e6tningen er at der allerede er k\u00f8rt kommandoen <code>master</code></p>"},{"location":"processes/convert-files-to-tif/#1-kr-ammendmaster","title":"1. K\u00f8r <code>ammendmaster</code>","text":"<p><code>ammendmaster</code> l\u00f8ber afleveringen igennem og ved mapper med filer af formaten <code>.odt</code>, <code>.odp</code>, <code>.ods</code> og/eller <code>.odg</code> og uden en pdf, s\u00e5 vil der blive dannet pdf til p\u00e5g\u00e6ldende filer.</p> <pre><code>convertool /path/to/MasterDocuments/_metadata/files.db /path/to/MasterDocuments ammendmaster\n</code></pre>"},{"location":"processes/convert-files-to-tif/#2-kr-replacepdf","title":"2. K\u00f8r <code>replacepdf</code>","text":"<p>For at sikre at <code>statutory</code> ikke giver en error, s\u00e5 konverters pdf'erne med versionerne 1.4, 1.5, 1.6 og 1.7 til pdf/a.</p> <pre><code>convertool /path/to/MasterDocuments/_metadata/files.db /path/to/MasterDocuments replacepdf\n</code></pre>"},{"location":"processes/convert-files-to-tif/#3-kr-statutory","title":"3. K\u00f8r <code>statutory</code>","text":"<p>Inden statutory k\u00f8res, s\u00e5 opret en ny mappe ved navnet <code>StatutoryDocuments</code> i roden af afleveringen.</p> <pre><code>convertool /path/to/MasterDocuments/_metadata/files.db /path/to/StatutoryDocuments statutory\n</code></pre> <p>Nu er afleveringen f\u00e6rdig.</p>"},{"location":"processes/convert-files/","title":"Convert files","text":"<p>Konvertering af indkomne original-filer fra myndigheder eller private parter er en kompleks proces, som involverer en del viden, v\u00e6rkt\u00f8jer og procestrin.</p> <p>Foruds\u00e6tningen for filkonvertering er <code>identifikation</code> med digiarch og tilh\u00f8rende v\u00e6rkt\u00f8jer.</p>"},{"location":"processes/convert-files/#opstning","title":"Ops\u00e6tning","text":"<p>For at ops\u00e6tte og forst\u00e5 convertool, l\u00e6s da guiden her. Der gennemg\u00e5s hvordan man bruger convertool i docker, og for hentet det dockerbillede ned man skal brug til at konveterer. N\u00e5r det billede er p\u00e5 den maskine der skal k\u00f8re conveteringerne, s\u00e5 kan du fors\u00e6tte med resten af ops\u00e6tningen.</p>"},{"location":"processes/convert-files/#aben-en-docker-container-med-convertool-billedet-til-en-aflevering","title":"\u00c5ben en docker container med convertool billedet til en aflevering","text":"<p>For at begynde at konvetere en aflevering skal man \u00e5bne en convertool container, hvor man har mounted den aflevering man gerne vil konveterer ind. den nemmeste m\u00e5de at g\u00f8re dette p\u00e5 er ved at \u00e5bne en ny PowerShell terminal i roden af den aflvering man gerne vil arbejde med og k\u00f8re f\u00f8lgende kommando i en PowerShell terminal:</p> <p><code>docker run -v ${pwd}:/root/handins --it [BILLEDE-ID]</code></p> <p>Denne kommando g\u00f8r flere ting p\u00e5 en gang, s\u00e5 her er en gennemgang af hvad de forskellige dele af den g\u00f8r:</p> <ul> <li><code>-v ${pwd}:/root/handins</code> mounter den directory som ens shell er i lige nu ind i docker containeren som man starter op i folderen <code>/root/handins</code> i containeren. Dvs. at selvom containeren k\u00f8re i sit eget, lukkede milj\u00f8, skabes der her en '\u00e5bining' hvor den har direkte adgang til pr\u00e6cis denne mappe, som er lokalt p\u00e5 din egen maskine. De programmer der er i Docker containeren kan s\u00e5 arbejde p\u00e5 data i denne mappe, dvs. afleveringen.</li> <li><code>--it</code> er to flag, som fort\u00e6ller docker at den skal \u00e5ben en interactiv terminal, dvs. den terminal du k\u00f8re kommandoen i. Uden denne kommando vil man skulle \u00e5bne en ny terminal og k\u00f8re en anden kommando for at komme ind i containeren.</li> <li><code>BILLEDE-ID</code> eller <code>IMAGE-ID</code> er et unikt ID som docker tildeler ethvert billede. Det kan findes ved at kalde kommandoen <code>docker image ls</code>. Kommandoen giver en liste af alle billeder som er lokalt p\u00e5 ens maskine. Alternativt kan man ogs\u00e5 \u00e5bne 'docker desktop', g\u00e5 under 'images' og i 'name' kollonen er ID'et til bileldet angivet under navnet p\u00e5 bileldet, samt med en genvej til at kopierer det fulde ID til udklipsholderen.</li> </ul> <p>N\u00e5r kommandoen er k\u00f8rt vil den \u00e5bne terminal v\u00e6re din eneste indgang ind i containeren. Bem\u00e6rk at hvis du lukker terminallen uden at afslutte containeren med <code>exit()</code>, s\u00e5 k\u00f8re den videre i baggrunden og sluger resourcer. For at lukke den igen skal du \u00e5bne docker desktop og finde den under 'containers' her vil den st\u00e5 som v\u00e6rende k\u00f8rende, og de kan lukke den herinde.</p>"},{"location":"processes/convert-files/#1-kr-convertool","title":"1. K\u00f8r convertool","text":"<p>Inden <code>convertool</code> k\u00f8res, s\u00e5 opret en ny mappe ved navnet <code>MasterDocuments</code> i roden af afleveringen. I denne mappe gemmes de konverteret filer.</p> <pre><code>convertool /path/to/Original-files/_metadata/files.db /path/to/MasterDocuments ammendmaster\n</code></pre>"},{"location":"processes/convert-files/#2-kr-symphovert","title":"2. K\u00f8r Symphovert","text":"<p><code>Symphovert</code> konverterer Lotus WordPerfect (lwp)-filer. Bem\u00e6rk at programmet skal k\u00f8res p\u00e5 en computer med IBM Symphony installeret.</p> <p>Bem\u00e6rk</p> <p>Mens symphovert k\u00f8rer, kan man ikke foretage andet p\u00e5 pc'en, som heller ikke m\u00e5 l\u00e5ses. Da der under processen kan komme personf\u00f8lsomme oplysninger til syne p\u00e5 sk\u00e6rmen, skal pc'en stilles en p\u00e5 l\u00e6sesalen, hvis programmet k\u00f8res om natten eller i weekenden.</p> <p>N\u00e5r programmet har k\u00f8rt vil der typisk v\u00e6re en m\u00e6ngde fejl, der kan l\u00f8ses ved blot at lade programmet k\u00f8re igen. Symphovert k\u00f8res derfor gentagne gange, indtil antallet af fejl har v\u00e6ret det samme to gange i tr\u00e6k.</p>"},{"location":"processes/identify-files/","title":"Identifikation af filer","text":"<p>Identifikation af indkomne filer fra myndigheder eller private parter er en kompleks proces, som involverer en del viden, v\u00e6rkt\u00f8jer og procestrin.</p> <p>Ved processens begyndelse oprettes en <code>status.txt</code> i den relevante <code>_metadata</code>-mappe (eg. <code>AVID.AARS.78.1\\OriginalFiles\\_metadata</code>). I dette dokument noteres hvor langt man er kommet i processen, hvilke fejl og problemer man er st\u00f8dt p\u00e5 undervejs, og hvilke manuelle rettelser man har foretaget.</p> <p>Ved processens begyndelse oprettes en <code>status.txt</code> i den relevante <code>_metadata</code>-mappe (eg. <code>AVID.AARS.78.1\\OriginalFiles\\_metadata</code>). I dette dokument noteres hvor langt man er kommet i processen, hvilke fejl og problemer man er st\u00f8dt p\u00e5 undervejs, og hvilke manuelle rettelser man har foretaget.</p> <p>Hver gang et v\u00e6rkt\u00f8j har k\u00f8rt inspiceres nogle af de ber\u00f8rte filer manuelt i stifinderen, for at sikre sig at v\u00e6rkt\u00f8jet har k\u00f8rt succesfuldt.</p> <p>Detaljerede guides til installation og brug af de enkelte v\u00e6rkt\u00f8jer findes <code>her</code>.</p> <p>Bem\u00e6rk</p> <p>F\u00f8r hvert v\u00e6rkt\u00f8j k\u00f8res, skal man sikre sig at man benytter den nyeste version af v\u00e6rkt\u00f8jet. Dette kan evt. g\u00f8res med kommandoen</p> <p>pipx upgrade-all</p>"},{"location":"processes/identify-files/#0-forbered-statustxt","title":"0. Forbered status.txt","text":"<p>Som sagt f\u00f8r er processen at konvetere en aflevering lang og fyldt med faldgrupper. For at g\u00f8re det muligt for en selv at spore sine tanker og handlinger over de dage, uger og (nogle gange desv\u00e6rre) m\u00e5neder man arbejder med afleveringen, er det vigtigt at man altid noterer sine tanker i <code>status.txt</code> filen.</p> <p>Vi anbefaler at man benytter den som logbog og \u00e5bner den hvergang man arbejder med en aflevering. Man laver s\u00e5 en overskrift med dagens dato og noterer ens handlinger og observationer derunder. Evt. kan man havde en TODO sektion med ting man skal g\u00f8re / holde \u00f8je med. Et eksempel p\u00e5 hvordan <code>status.txt</code> kunne v\u00e6re opsat p\u00e5 ses herunder:</p> <pre><code>D. 2/10/2023\n    K\u00f8rte Digiarch f\u00f8rste gang p\u00e5 afleveringen\n    - Der ser ud til at v\u00e6re mange GIS relaterede filer. Hver opm\u00e6rksom n\u00e5r rearranger skal k\u00f8res.\n    - Flere .pdf filer har et extension mismatch. Det ligner .docx filer der ved en fejl er gemt som .pdf ved f\u00f8rste \u00f8jekast\n\nTODO:\n    - Kig p\u00e5 et par stykker af .pdf filerne med extension mismatch og se om det er en kategorisk fejl\n\nManuelle rettelser\n    - File med puid 111-1112323-3423423 havde 3 extensions, jeg slettede alle bortset fra den f\u00f8rste (.pdf) for at sikre den blev identificeret korrekt.\n</code></pre> <p>Her betaler det sig at v\u00e6re udf\u00f8rlig.</p>"},{"location":"processes/identify-files/#1-identifikation-af-indkomne-filer","title":"1. Identifikation af indkomne filer","text":"<p>F\u00f8r alt andet skal de indkomne filer s\u00e5 vidt muligt identificeres. Is\u00e6r ved store afleveringer, kan identifiaktionen dog tage lang tid. Man kan derfor med fordel k\u00f8re den i baggrunden, mens andre opgaver l\u00f8ses, eller natten over.</p> <pre><code>digiarch identify /path/to/Original-files\n</code></pre> <p>BEM\u00c6RK: Hvis der allerede er en <code>files.db</code> file i <code>_metadata</code> mappen, s\u00e5 vil digiarch opdaterer og overskrive denne. Omd\u00f8b den til et andet navn for at undg\u00e5 dette hvis den skal gemmes</p> <p>Den af 'digiarch' producerede 'files.db'-fil inspiceres herefter i DB Browser. Det er vigtigt at danne sig et overblik over f\u00f8lgende:</p> <ul> <li>Hvilke filetyper der er i <code>_SignatureCount</code>-viewet (Er det prim\u00e6rt .docx? .pdf? Forskellige typer af GIS filer?) Dette har betydning for resten af processen, da store m\u00e6ngder 'eksotiske' filtyper eller filer som ikke akn identificeres oftest skal l\u00f8ses manuelt</li> <li>Hvilke forskellige problemer der er i <code>_IdentificationWarnings</code>-viewet (Er der mange extension mismatch? Eller mange filer der skal erstattes af en template?). Bem\u00e6rk at der ikke altid (dog for det meste) er nogle _IdentificationWarnings, men pr\u00f8v alligevel at f\u00e5 et overblik over afleveringen.</li> </ul> <p>Man noterer sine tanker i <code>status.txt</code>.</p>"},{"location":"processes/identify-files/#2-omdbning-af-zip-ol-filer","title":"2. Omd\u00f8bning af zip o.l. filer","text":"<p>Digiarch benytter Siegfried til at identificere langt st\u00f8rstedelen af vores filer. Den bygger s\u00e5 selv p\u00e5 PRONOM databasen og andre lignende databaser over fil typer.</p> <p>I sin identifikation af fil typer kan Siegfried godt v\u00e6re lidt pedantisk. Derfor sker det at den s\u00e6rligt identificerer filer i et zip-format forkert. Mange filer i zip-formater vil derfor havde en warning der siger <code>Extension_Mismatch</code>.</p> <p>For at rette op p\u00e5 det skal man g\u00f8re f\u00f8lgende:</p> <ol> <li>S\u00f8rg for f\u00f8rst for at <code>renamer</code> er installeret og opdateret</li> <li> <p>Dern\u00e6rst, kig p\u00e5 de filer som har et <code>Extension_Mismatch</code>. Hvis nogle af dem har et af de PUID'er som er markeret nede i tabellen, s\u00e5 skal deres extension erstattes af den p\u00e5g\u00e6ldende extension i tabellen.</p> PUID extension fmt/411 .rar fmt/484 .7z fmt/613 .rar x-fmt/263 .zip x-fmt/264 .rar x-fmt/265 .tar x-fmt/266 .gz x-fmt/430 .msg aca-fmt/9 .dat <p>Der vil ogs\u00e5 v\u00e6re tidspunkter hvor at Digiarch har markeret nogle filer som v\u00e6rende .zip filer, men hvor at de ikke skal bevares af os af forskellige grunde. Hvis man m\u00f8der s\u00e5dan en type fil, skal den markeres som ikke bevaringsv\u00e6rdi manuelt i 'action' feltet. De filtyper der typisk er tale om er:</p> PUID extension x-fmt/412 .jar </li> <li> <p>For at erstatte en specifik filtype angives den PUID og hvilken extension man \u00f8snker at give alle filer med  <code>Extension_Mismatch</code> s\u00e5ledes:</p> </li> </ol> <pre><code>renamer db_file_path puid new_extension_without_period_sign\n</code></pre> <p>For mere deltajeret beskrivelse af brugen af <code>renamer</code>, se trin 5.</p>"},{"location":"processes/identify-files/#4-udpak-alle-komplekse-filer","title":"4. Udpak alle komplekse filer","text":"<p>Opret en mappe med navnet <code>save_dir</code> i <code>.\\OriginalFiles\\_metadata</code>. I mappen <code>save_dir</code> vil de originale filer blive lagt efter udvinding.</p> <pre><code>unarchiver .\\_metadata\\files.db .\\_metadata\\save_dir\\\n</code></pre> <p><code>unarchiver</code> l\u00e6gger en log, som kan findes i <code>_metadata</code> mappen. Denne skal efter en k\u00f8rsel inspiseres for fejl angivet med <code>warning</code> eller <code>error</code>. Evt. fejl skal enten udbedres eller noteres i <code>status.txt</code> filen.</p> <p>Det er en god id\u00e9 at foretage stikpr\u00f8ver i stifinderen for de enkelte filtyper der er blevet h\u00e5ndteret, for at sikre sig at unarchiver har k\u00f8rt succesfuldt.</p>"},{"location":"processes/identify-files/#5-identificer-filer-igen","title":"5. Identific\u00e9r filer igen","text":"<p>Man skal identific\u00e9r filer igen via digiarch</p> <pre><code>digiarch identify /path/to/Original-files\n</code></pre> <p>Noter i <code>status.txt</code> hvor mange <code>warnings</code> der findes i <code>files.db</code></p>"},{"location":"processes/identify-files/#6-omdbning-af-udpakkede-og-andre-resterende-filer-samt-identifikation-af-andre-problemer","title":"6. Omd\u00f8bning af udpakkede og andre resterende filer, samt identifikation af andre problemer","text":"<p>I dette skridt bruges <code>renamer</code> igen til at omd\u00f8be de filer der ikke blev omd\u00f8bt f\u00f8r, samt de i trin 3 udpakkede filer. I dette trin identificeres ogs\u00e5 hvilke fejl og mangler der ellers er i afleveringen. Det er kun bin\u00e6re fejl extension mismatches og andre fejl der skal l\u00f8ses/identificeres.</p> <p>V\u00e6r opm\u00e6rksom p\u00e5, at der ikke sker en \u00e6ndring p\u00e5 GIS-filer.</p> <p>I <code>_IdentificationWarnings</code>-viewet filtreres derfor det er kun f\u00f8lgende warnings, der skal l\u00f8ses:</p> <ul> <li><code>Extension mismatch</code></li> <li>(Bin\u00e6r fil) <code>No match</code></li> <li>(Bin\u00e6r fil) <code>No match; possibilities based on extension are \u2026</code></li> <li>(Tekst fil) <code>Match on extension only</code></li> <li>(Tekst fil) <code>Match on extension only; extension mismatch</code></li> </ul> <p>Alle filer med advarslen <code>Extension mismatch</code> bruges <code>renamer</code> til omd\u00f8bning af filerne extension. Ved tvivl om extension kan man ved fordel se p\u00e5 andre filer med samme <code>puid</code> i afleveringen.</p> <pre><code>renamer .\\OriginalFiles\\_metadata\\files.db puid new_extension_without_period_sign\n</code></pre> <p>Notere hvilke bin\u00e6re filer der ikke kan identificeres. Disse har advarslen <code>No match</code> eller <code>No match; possibilities based on extension are \u2026</code>. Bem\u00e6rk at nogle af disse filer kan v\u00e6re GIS-filer.</p> <p>Tekstfiler med advarslen <code>Match on extension only</code> eller <code>Match on text only; extension mismatch</code> skal noteres, men herefter ikke g\u00f8res yderligere ved. Convert-v\u00e6rkt\u00f8jet <code>plaintextconverter</code> vil kopiere teksten direkte over.</p>"},{"location":"processes/identify-files/#7-identificer-problematiske-filformater","title":"7. Identific\u00e9r problematiske filformater","text":"<p>I dette trin identificere hvilke filformater vores konverteringsv\u00e6rkt\u00f8jer aktuelt ikke kan h\u00e5ndtere.</p> <pre><code>convert-unmanaged .\\ OriginalFiles\\_metadata\\files.db\n</code></pre> <p>Kopier ouput fra <code>convert-unmanaged</code> til \u2018status.txt`</p> <p>Se convert-unmanaged for mere information</p>"},{"location":"processes/identify-files/#8-gis-filer-skal-merges","title":"8. GIS-filer skal merges","text":"<p>Gisprocessor skal k\u00f8res over to omgange. <code>j-json</code> genererer en json-fil, der viser, hvad v\u00e6rkt\u00f8jet flytter. <code>move</code> flytter GIS-filerne i json-filen. Efter v\u00e6rkt\u00f8jet har k\u00f8rt, inspiceres den af v\u00e6rkt\u00f8jet skabte log-fil.</p>"},{"location":"processes/identify-files/#trin-1","title":"Trin 1","text":"<pre><code>gisprocessor g-json\n</code></pre> <p>Hertil skal der udfyldes den fulde sti til av.db. Dette g\u00f8res med f\u00f8lgende hvoraf XX byttes ud med afleveringsnummeret.</p> <pre><code>.\\_metadata\\AVID.AARS.XX.av.db\n</code></pre>"},{"location":"processes/identify-files/#trin-2","title":"Trin 2","text":"<pre><code>gisprocessor move\n</code></pre>"},{"location":"processes/identify-files/#typer-af-gis-projekter","title":"Typer af GIS-projekter","text":"Navn Obligatoriske filformater Mulige filformater ESRI Shapefile shp, shx, dbf sbn, sbx, atx, fbn. fbx, ain, aih, ixs, mxs, prj, xml, cpg MapInfo dataset format tab dat, map, ud, ind MapInfo Interchange Format mif mid <p>Se gisprocessor for mere information</p>"},{"location":"processes/identify-files/#9-udpakkede-filer-skal-rearranges","title":"9. Udpakkede filer skal rearranges","text":"<p>I dette skridt skal de filer, der blev udpakket i trin 3, flyttes til nye mapper i en ny <code>docCollection</code>, s\u00e5ledes at de ligger i hver deres mappe.</p> <pre><code>rearranger .\\OriginalFiles newDocCollectionnumer dIDCounter newTableNumer\n</code></pre> <p><code>newDocCollectionnumer</code> er nummeret p\u00e5 den nye docCollection-mappe, hvortil filerne flyttes (hvis der i forvejen er 3 docCollections vil den nye mappes nummer v\u00e6re 4).</p> <p><code>dIDCounter</code> er den sidste fil i den sidste docCollections nummer + 1 (hvis der er 34875 filer vil nummeret v\u00e6re 34876).</p> <p><code>newTableNumber</code> er antallet af eksisterende tables (i tables-mappen) + 1 (dvs. at hvis der er 10 tables vil tallet v\u00e6re 11)</p> <p>Se rearranger for mere information</p>"},{"location":"processes/identify-files/#10-identificer-filer-igen","title":"10. Identific\u00e9r filer igen","text":"<p>Til sidst identific\u00e9r man filer igen via digiarch</p> <pre><code>digiarch identify /path/to/Original-files\n</code></pre> <p>Noter i <code>status.txt</code> hvor mange <code>warnings</code> der findes i <code>files.db</code>.</p> <p>N\u00e5r afleveringen findes klar til konvertering, opdateres status for afleveringen i excel-arket <code>Arkiveringsversioner (notes)</code> p\u00e5 funktionsdrevet til \"Klar til konvertering\".</p>"},{"location":"registration/","title":"Index","text":""},{"location":"registration/#alt-om-registrering-af-arkivalier","title":"Alt om registrering af arkivalier","text":""},{"location":"registration/sam/","title":"Index","text":"<p>SAM er vores registreringssystem.</p>"},{"location":"registration/sam/export/","title":"Export","text":"<p>Eksport af metadata...</p>"},{"location":"registration/sam/import/","title":"Import","text":"<p>Import af metadata...</p>"},{"location":"registration/sam/installation/","title":"Installation","text":"<p>Installation af SAM...</p>"},{"location":"registration/sam-workflows/","title":"Index","text":"<p>SAM-workflows er et lille program, som blandt andet kan generere mindre billedfiler til online visninger af de digitale masterfiler, som vi registerer i SAM.</p>"},{"location":"registration/sam-workflows/#fejlmeldinger-og-sprgsmal","title":"Fejlmeldinger og sp\u00f8rgsm\u00e5l","text":"<p>Indberetning af fejl, sp\u00f8rgsm\u00e5l eller andet foretages gennem issues, som beskrevet under brugen af Github. Her er det direkte link to issue-siden for SAM-workflows.</p>"},{"location":"registration/sam-workflows/generate-access-files/","title":"Generate access files","text":"<p>SAM-workflows kan aktuelt generere access-filer (jpg-filer) ud fra pdf-filer eller alle g\u00e6ngse billedformater (jpg, tif, png, gif, JPEG 2000, bmp med flere).</p>"},{"location":"registration/sam-workflows/generate-access-files/#krsel-af-workflow","title":"K\u00f8rsel af Workflow","text":"<p>Aktuelt er genereringen af access-filer det eneste workflow, som SAM-workflows indeholder, og man g\u00e5r derfor direkte til brugergr\u00e6nsefladen for dette workflow:</p> <p></p>"},{"location":"registration/sam-workflows/generate-access-files/#obligatoriske-parametre","title":"Obligatoriske parametre","text":"<p>For at k\u00f8re dette workflow skal man som minimum angive stien til den csv-fil, som er eksporteret fra det relevante SAM-job ('Input'-parametret), samt hvilken csv-fil resultatet af workflowet skal gemmes i ('Output'-parametret).</p>"},{"location":"registration/sam-workflows/generate-access-files/#valgfrie-parametre","title":"Valgfrie parametre","text":"<p>Foruden de obligatoriske parametre, er det muligt at til- eller frav\u00e6lge f\u00f8lgende tre parameter:</p> Add watermark Ving af, hvis access-filerne skal p\u00e5f\u00f8res stadsarkivets vandm\u00e6rke Dette parameter skal almindeligvis s\u00e6ttes. Upload Ving af, hvis access-filerne ogs\u00e5 skal uploades til stadsarkivets online filserver. Hermed f\u00e5r filerne ogs\u00e5 en online adresse (url), som kan benyttes i registreringerne. Dette parameter skal almindeligvis s\u00e6ttes. Overwrite Ving af, hvis access-filerne skal overskrive eventuelle allerede uploadede filer p\u00e5 stadsarkivets online filserver. Dette parameter skal s\u00e6ttes, hvis man er sikker p\u00e5 at allerede uploadede filer skal erstattes med disse filer."},{"location":"registration/sam-workflows/generate-access-files/#resultat-af-workflow","title":"Resultat af workflow","text":"<p>Efter succesrig k\u00f8rsel af workflowet vil der, alt efter v\u00e6rdien af de enkelte valgfrie parametre, som minimum v\u00e6re genereret f\u00f8lgende:</p> <ol> <li>En csv-fil i den valgte 'Output'-mappe, som skal bruges til at re-importere i SAM, s\u00e5 access-filernes url'er kan tilf\u00f8jes de relevante registreringer.</li> <li>En eller flere genererede access-filer, placeret i undermapper under ark_access_store p\u00e5 stadsarkivets OneDrive-afdelingsdrev. Hvis man eksempelvis har genereret access-filer af et tif-billede med id'et 000277258, vil de relevante access-filer v\u00e6re at finde her:     <pre><code>C:\\Users\\azkb075\\Aarhus kommune\\AFD-Aarhus Stadsarkiv - Dokumenter\\_DIGITALT_ARKIV\\ark_access_store\\000277258\\\n</code></pre></li> <li>Hvis Upload-parametret var vinget af, vil de samme access-filer nu ogs\u00e5 findes i stadsarkivets online filserver:     <pre><code>https://acastorage.blob.core.windows.net/sam-access/000277258/000277258_m.jpg\n</code></pre></li> </ol>"},{"location":"registration/sam-workflows/generate-access-files/#fejl","title":"Fejl","text":"<p>Der kan opst\u00e5 en r\u00e6kke fejl i forbindelse med genereringen af access-filerne, eks. manglende netv\u00e6rksforbindelse, korrumperede filer med mere. Hvis en fejl stopper k\u00f8rslen f\u00f8r den er f\u00e6rdig, er det sikkert at starte forfra med workflowet. Send gerne et skr\u00e6mdump af fejlen til it-teamet, hvis du er i tvivl om hvordan fejlbeskeden skal fortolkes eller ikke kan rette fejlen.</p> <p>Tip</p> <p>Undlad at vinge Overwrite-parametret af n\u00e5r workflowet k\u00f8res igen, s\u00e5 kun de resterende filer uploades i anden omgang.</p>"},{"location":"registration/sam-workflows/installation/","title":"Installation","text":"<p>SAM-workflows best\u00e5r af 1) et lille program (<code>sam_workflows.exe</code>-filen) og 2) en mappe med program-filer, som begge skal v\u00e6re p\u00e5 plads f\u00f8r programmet virker.</p> <p>Bem\u00e6rk</p> <p>SAM-workflows virker kun p\u00e5 administrative Windows-PC'er, da programmet ofte skal arbejde med de filer, som findes i vores digitale arkiv. </p>"},{"location":"registration/sam-workflows/installation/#sam_workflowsexe","title":"sam_workflows.exe","text":"<p>Seneste udgave af sam_workflows.exe ligger altid p\u00e5 denne side, hvorfra den kan downloades. Der kr\u00e6ves ingen installationsproces, men blot at <code>sam_workflows.exe</code>-filen placeres et eller andet sted i din bruger-mappe:</p> <p>Eksempel</p> <p><pre><code>C:\\Users\\{az-ident}\\Workflows\\sam_workflows.exe\n</code></pre> Erstat <code>{az-ident}</code>med dit eget.</p>"},{"location":"registration/sam-workflows/installation/#programfilerne","title":"Programfilerne","text":"<p>Mappen med de tilh\u00f8rende programfiler kan kun f\u00e5s ved henvendelse til it-teamet, da de blandt andet indeholder autorisationskoder til vores filservice.</p> <p>N\u00e5r mappen med programfiler er modtaget, skal den placeres direkte i roden af din bruger-mappe:</p> <p>Eksempel</p> <pre><code>C:\\Users\\{az-ident}\\.sam_workflows\\\n</code></pre> <p>Bem\u00e6rk</p> <p>Det er vigtigt, at man ikke \u00e6ndrer navnet p\u00e5 mappen. Den skal hedde <code>.sam_workflows</code> med foranstillet punktum.</p>"},{"location":"registration/sam-workflows/installation/#mappe-til-csv-filer","title":"Mappe til csv-filer","text":"<p>Flere workflows arbejder med csv-filer, som henholdsvis importeres fra eller eksporteres til SAM. For mange vil det v\u00e6re nemmest at oprette en fast mappe i bruger-mappen til disse csv-filer:</p> <p>Eksempel</p> <pre><code>C:\\Users\\{az-ident}\\Workflows\\SAM-jobs\\\n</code></pre> <p>Dette er ikke et krav, men en anbefaling. N\u00e5r man efterf\u00f8lgende bruger SAM til at eksportere eller importere csv-filer, vil programmet huske hvilken mappe csv-filerne tidligere er placeret i.</p>"},{"location":"resources/python-async/","title":"Python Async Resources","text":"<p>Using the python <code>async</code> keyword allows you (among other things) to define functions that return a <code>Coroutine</code> object and allows for some mild asynchronicity in python. Below are some links to a few articles which introduce the general concepts asynchronous programming in python.</p>"},{"location":"resources/python-async/#introductory-pieces","title":"Introductory pieces","text":"<p>Real Pythons Complete Async IO Walkthrough</p> <p>Cloudfits 5-part series on Async IO in python</p>"},{"location":"selection/","title":"Index","text":""},{"location":"selection/#alt-om-bevaringkassation-af-arkivalier","title":"Alt om bevaring/kassation af arkivalier","text":""},{"location":"sites/aarhusarkivet/","title":"AarhusArkivet","text":"<p>AarhusArkivet er den prim\u00e6re online indgang til vores samlinger.</p>"},{"location":"sites/aarhusarkivet/#fejlmeldinger-og-udviklingsnsker","title":"Fejlmeldinger og udviklings\u00f8nsker","text":"<p>Indberetning af fejl, udviklings\u00f8nsker, sp\u00f8rgsm\u00e5l med mere foretages gennem issues, som beskrevet under brugen af Github.</p>"},{"location":"sites/aarhusarkivet/#teknisk-information","title":"Teknisk information","text":"<p>AarhusArkivet er aktuelt en Flask-applikation uden integreret database, som hostes p\u00e5 Heroku.</p> <p>Alle kald til backends foreg\u00e5r gennem et api-modul, som videresender requests til f\u00f8lgende services:</p> <ul> <li>Auth0. Authentication</li> <li>DynamoDB (AWS). Brugerstyring og Authorization</li> <li>Cloudsearch (AWS). Fuldtekst s\u00f8geindeks</li> <li>Oaws (GCP). Registreringer af materialer og entiteter</li> <li>Aarhusiana (GCP). Autosuggest</li> </ul>"},{"location":"sites/byraadsarkivet/","title":"Byr\u00e5dsarkivet","text":""},{"location":"sites/smartarkivering/","title":"Smartarkivering","text":""},{"location":"sites/smartarkivering/#hentning-nyt-data-via-ftp","title":"Hentning nyt data via FTP","text":""},{"location":"sites/smartarkivering/#run-workflow","title":"Run workflow","text":""},{"location":"sites/smartarkivering/#process-raw-data","title":"Process raw data","text":""},{"location":"sites/smartarkivering/#import-to-sam","title":"Import to SAM","text":""},{"location":"tools/","title":"Introduktion","text":"<p>Alt om de v\u00e6rkt\u00f8jer, clis og scripts, som vi bruger.</p>"},{"location":"tools/autogui/","title":"AutoGui","text":"<p>How to remove multiple entries specified in a csv-file:</p> <ol> <li> <p>Place SAM in the right side of the screen by pressing windows key + right key</p> </li> <li> <p>In SAM go to \"Admin Panel\"/\"Delete OAS\"</p> </li> <li> <p>Place VS Code in the left side of the screen by pressing windows key + left key</p> </li> <li> <p>In VS Code open the AutoGui repo and specify the path to the csv-file.</p> </li> <li> <p>Standard screensize is 1920x1200, if not this size use the while-loop in the code to find the screen coordinates of the buttons in SAM for the delete entry process.</p> </li> </ol>"},{"location":"tools/backupfilter/","title":"Backupfilter","text":"<p>The user needs the backupdatabase as a csv-file to input to this cli.</p>"},{"location":"tools/backupfilter/#installation","title":"Installation","text":"<pre><code>pipx install git+https://github.com/aarhusstadsarkiv/filter_csv_generic.git\n</code></pre> <p>Test efterf\u00f8lgende installationen med f\u00f8lgende kommando:</p> <pre><code>backupfilter --version\n</code></pre> <p>eller</p> <pre><code>backupfilter --list\n</code></pre> <p>eller </p> <p><pre><code>backupfilter --help\n</code></pre> for eksempler.</p> <p>Opdat\u00e9r med: <pre><code>pipx update filter-csv-generic\n</code></pre></p> <p>Afinstallation <pre><code>pipx uninstall filter-csv-generic\n</code></pre></p>"},{"location":"tools/backupfilter/#brug","title":"Brug","text":"<p>Filtrerer en backupdatabase som csv-formatteret fil.</p> <p>Angiv et antal --filter for at filtrere efter det \u00f8nskede:</p>"},{"location":"tools/backupfilter/#-filter-field-operator-value","title":"--filter [field] [operator] [value]:","text":"<p>hvor value er den \u00f8nskede s\u00f8gev\u00e6rdi:</p> <p>ex. --filter Samling contains Salling.</p>"},{"location":"tools/backupfilter/#-list","title":"--list:","text":"<p>Viser de for s\u00f8gning tilg\u00e6ngelige felter samt deres operatorer.</p>"},{"location":"tools/backupfilter/#-filename-filename","title":"--filename [filename]","text":"<p>hvis der \u00f8nskes et specielt filnavn til filerne med de fundne indgange, kan det angives her. Nyttigt hvis der laves flere s\u00f8gninger i streg til samme bibliotek, s\u00e5ledes forhindres overskrivning af tidligere resultater.l</p>"},{"location":"tools/backupfilter/#-or_","title":"--or_","text":"<p>Hvis der er flere filtre, \"and\"'es de sammen som standard, men hvis denne option angives, bliver de \"or\"'ede sammen i stedet.</p>"},{"location":"tools/backupfilter/#-version","title":"--version","text":"<p>Printer den aktuelle version af programmet.</p>"},{"location":"tools/backupfilter/#-help","title":"--help","text":"<pre><code>Filters the csv formatted backup database:\nApply any number of --filter\nUse --list for allowed fields and operators.\n\nex.1 field is \"id-field\"\n--filter Samling equalTo 1\nor\n--filter Samling contains Salling\n\nex.2 if the field is a dictionary, and target search is in a key's value:\n--filter \"Administrative data\" contains \"Bestillingsinformation:negativsamlingen 1970\"\n\nex.3 if the field is a dictionary, and filter after target has a certain key:\n--filter \"Administrative data\" hasKey Bestillingsinformation\n\nex.4 the field is a dictionary and the key is known and filter on the value:\n--filter \"Beskrivelsesdata\" contains Typer:Farve\n\npositional arguments:\n  input_csv_file_path   Path to the backup database csv file.\n  output_dir            Path to the output/result directory for csv file(s).\n\noptions:\n  -h, --help            show this help message and exit\n  --filter FILTER FILTER FILTER\n                        Adds a filter to limit the results\n  --version             States the current version of this CLI.\n  --list                Lists the allowed fields and their operators.\n  --filename FILENAME   specify the output filename(s).\n  --or_                 the filters are or'ed together.\n</code></pre>"},{"location":"tools/byteheader/","title":"Multiprocessing of longest common substring","text":"<p>This program takes a folder with the files which byte headers is to be compared. For 3 files and a byte header of 1024, this takes around 1 second. The program is based on dynamic programming.</p>"},{"location":"tools/byteheader/#argument-1","title":"Argument 1:","text":"<p>The path to the folder which contains the files.</p>"},{"location":"tools/byteheader/#argument-2","title":"Argument 2:","text":"<p>Optional argument which sets the size of the byte header, default is 1024. <pre><code>usage: multip.py [-h] [--version] files_home [header_size]\n\nCompares the first 1024 bytes of each file with the other files and finds longest common substrings\n\npositional arguments:\n  files_home   Home of files to compare.\n  header_size  Optional size of header to compare.\n\noptions:\n  -h, --help   show this help message and exit\n  --version    show program's version number and exit\n</code></pre></p>"},{"location":"tools/chocolatey/","title":"Chocolatey","text":"<p>Chocolatey er en s\u00e5kaldt package manager til Windows. Form\u00e5let er at g\u00f8re det lettere at installere og opdatere software.</p>"},{"location":"tools/chocolatey/#installation","title":"Installation","text":"<p>Denne installationsguide er skrevet med udgangspunkt i den officielle guide.</p> <ol> <li>Tryk p\u00e5 Access Director</li> <li>Start PowerShell som administrator (h\u00f8jreklik -&gt; K\u00f8r som administrator)</li> <li>K\u00f8r f\u00f8lgende kommando (kopier og inds\u00e6t i PowerShell):  <pre><code>Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))\n</code></pre></li> <li>Lad installationen k\u00f8re f\u00e6rdig</li> <li>Luk PowerShell og k\u00f8r en ny som administrator</li> <li>Skriv <code>choco</code> for at tjekke, at installationen er g\u00e5et som forventet</li> </ol> <p>Bem\u00e6rk</p> <p>Chocolatey skal altid bruges via en administrativ PowerShell.</p> <p>Programmer kan findes ved at s\u00f8ge i packages. Som eksempel installerer f\u00f8lgende kommando den seneste version af Python.</p> <pre><code>choco install python\n</code></pre>"},{"location":"tools/chocolatey/#opdatering","title":"Opdatering","text":"<p>Alle programmer installeret via Chocolatey skal opdateres via Chocolatey, igen i en administrativ PowerShell. F\u00f8lgende kommando opdaterer alle installerede programmer.</p> <pre><code>choco upgrade all\n</code></pre> <p>Hvis man blot vil opdatere et program, skal man bare skrive navnet. Her bruges Python igen som eksempel.</p> <pre><code>choco upgrade python\n</code></pre> <p>Den officielle dokumentation af <code>upgrade</code> kan findes her.</p>"},{"location":"tools/convert-qa/","title":"Convert QA","text":""},{"location":"tools/convert-qa/#installation","title":"Installation","text":"<p>Preferred way is to install with pipx: <code>pipx install git+https://github.com/aarhusstadsarkiv/convert-qa.git</code></p>"},{"location":"tools/convert-qa/#convert-compare","title":"convert-compare","text":"<p>This tool provides a way for you to easily compare files between original, master and statutory</p> <p>The script requires that you specify the paths to original and master documents:</p> <ul> <li><code>convert-compare --master path/to/master/files --original path/to/original/files</code></li> </ul> <p>Statutory documents can also be specified with <code>--statutory</code> but is optional</p> <p>The tool only reads from the metadata database for the original documents.</p> <p>Default output is set to <code>./comparison_output</code>, this can be changed with <code>-o</code> and <code>--output</code>.</p> <pre><code>convert-compare [-h] [--original ORIGINAL] [--master MASTER] [--statutory STATUTORY] [--output OUTPUT] [--digiarch]\n\noptions:\n  -h, --help            show this help message and exit\n  --original ORIGINAL   directory pointing to original documents containing the metadata folder\n  --master MASTER       directory pointing to master documents\n  --statutory STATUTORY\n                        (optional) directory pointing to statutory documents\n  --output OUTPUT       directory to output files into\n  --digiarch            generate metadata folder with digiarch\n</code></pre>"},{"location":"tools/convert-qa/#convert-encoding","title":"convert-encoding","text":"<p>This tool takes a list of Open Document files and check the text inside the content.xml file for unusual character sequences.</p> <p>The characters are searched within tags, they must be surrounded by ASCII characters and not included in the optional <code>IGNORE</code> argument.</p> <pre><code>convert-encoding [-h] [--ignore IGNORE] files [files ...]\n\npositional arguments:                                                                                                                                                                                                          \n  files            the files to check                                                                                                                                                                                          \n\noptions:                                                                                                                                                                                                                       \n  -h, --help       show this help message and exit\n  --ignore IGNORE  extra characters to ignore\n</code></pre>"},{"location":"tools/convert-qa/#clean-empty-columns","title":"clean-empty-columns","text":"<p>Take a list of databases or archive folders and check each table for empty columns (all values either null or ''). Completely empty tables will also be removed.</p> <p>Empty columns are removed only if the <code>--commit</code> option is used and are otherwise ignored.</p> <pre><code>clean-empty-columns [-h] [--commit] [--log-file LOG_FILE] {archive,sqlite} files [files ...]\n\npositional arguments:\n  {archive,sqlite}     whether the files are archives or SQLite databases\n  files                the databases/archives to clean\n\noptions:\n  -h, --help           show this help message and exit\n  --commit             commit changes to database\n  --log-file LOG_FILE  write change events to log file\n</code></pre>"},{"location":"tools/convert-qa/#remove-control-characters","title":"remove-control-characters","text":"<p>Remove control characters from a text file.</p> <p>Removed characters are: 00, 01, 02, 03, 04, 05, 06, 0b, 0e, 0f, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 1a, 1c, 1d, 1e, 1f.</p> <p>Characters are removed from the file(s) only if the <code>--commit</code> option is used.</p> <p>To preserver the original file, use the <code>--keep</code> option.</p> <pre><code>remove-control-characters [-h] [--commit] [--keep] --log-file LOG_FILE file [file ...]                                                                      \n\npositional arguments:                                                                                                                                                  \n  file                 the path to the file                                                                                                                            \n\noptions:                                                                                                                                                               \n  -h, --help           show this help message and exit\n  --commit             commit changes to file\n  --keep               keep original file\n  --log-file LOG_FILE  write change events to log file\n</code></pre>"},{"location":"tools/convert-qa/#remove-duplicate-rows","title":"remove-duplicate-rows","text":"<p>Remove duplicate rows from a SQLite database.</p> <p>Duplicate rows are removed only if the <code>--commit</code> option is used and are otherwise ignored.</p> <pre><code>remove-duplicate-rows [-h] [--commit] --log-file LOG_FILE file [file ...]       \n\npositional arguments:                                                           \n  file                 the path to the database file                            \n\noptions:                                                                        \n  -h, --help           show this help message and exit\n  --commit             commit changes to database\n  --log-file LOG_FILE  write change events to log file\n</code></pre>"},{"location":"tools/convert-qa/#remove-tables","title":"remove-tables","text":"<p>Remove tables from a given archive.</p> <p>Use <code>@empty</code> as tables argument to automatically remove all tables with no rows.</p> <pre><code>remove-tables [-h] [--log-file LOG_FILE] archive tables [tables ...]\n\npositional arguments:\n  archive              the path to the archive\n  tables               the tables to remove\n\noptions:\n  -h, --help           show this help message and exit\n  --log-file LOG_FILE  write change events to log file\n</code></pre>"},{"location":"tools/convert-unmanaged/","title":"Convert-unmanaged","text":"<p>Convert-unmanaged er et v\u00e6rkt\u00f8j, der bruges til at identificere, hvilke filformater der er i en given aflvering, som vores konverteringsv\u00e6rkt\u00f8jer (endnu) ikke kan h\u00e5ndtere.</p>"},{"location":"tools/convert-unmanaged/#installation","title":"Installation","text":"<p>Convert-unmanaged skal installeres via master branch med pipx:</p> <pre><code>pipx install git+https://github.com/aarhusstadsarkiv/convert-unmanaged.git\n</code></pre> <p>Test efterf\u00f8lgende installationen med f\u00f8lgende kommando:</p> <pre><code>convert-unmanaged --version\n</code></pre> <p>N\u00e5r man skal opdatere convert-unmanaged, bruges <code>pipx</code> med <code>--upgrade</code>:</p> <pre><code>pipx upgrade convert-unmanaged\n</code></pre>"},{"location":"tools/convert-unmanaged/#brug","title":"Brug","text":"<p>Convert-unmanaged k\u00f8res med kommandoen:</p> <pre><code>convert-unmanaged db_file_path\n</code></pre> <p>Eksempel</p> <p><code>powershell convert-unmanaged D:\\AVID.AARS.84.1\\OriginalFiles\\_metadata\\files.db</code></p>"},{"location":"tools/convertool/","title":"Convertool","text":"<p>Convertool er en CLI (Command-Line Interface), som benyttes til at konvertere filer, s\u00e5ledes de overholder Aarhus Stadsarkivs arkiveringskrav. Der l\u00e6ses fra DB-filen produceret af Digiarch.</p> <p>Hvis du skal udvikle p\u00e5 convertool, se da s\u00e5 dokumnetationen som er p\u00e5 convertools GH-repo, under fanen 'wiki\u00b4. Her er der guides og tips til hvordan man udvikler med convertool.</p>"},{"location":"tools/convertool/#forudstninger","title":"Foruds\u00e6tninger","text":""},{"location":"tools/convertool/#docker","title":"Docker","text":"<p>Convertool kr\u00e6ver at <code>docker</code> er installeret, da den k\u00f8rer i en docker container. Den nemmeste m\u00e5de at tilg\u00e5 docker p\u00e5 p\u00e5 windows er gennem docker desktop.</p>"},{"location":"tools/convertool/#hent-convertool-billedet-ned","title":"Hent convertool billedet ned","text":"<p>N\u00e5r docker er installeret, skal man havde docker billedet sat up lokalt. Det kan ske p\u00e5 to m\u00e5der:</p> <p>Man kan hente docker billedet fra azure ved f\u00f8lgende kommando</p> <p><code>docker pull acaregistry.azurecr.io/convertool:latest</code></p> <p>Det kan v\u00e6re n\u00f8dv\u00e6ndigt at logge ind med azure f\u00f8rst. For at g\u00f8re dette skal du hente azure CLI, \u00e5bne en ny PowerShell og f\u00f8rst logge ind ved at skrive <code>az login</code>. Der vil s\u00e5 bliver \u00e5bnet en browser hvor du vil bliver logget ind p\u00e5 azure automatisk, hvis din browser er logget ind. Derefter skal du linke up til vores registry p\u00e5 azure ved at skrive <code>az acr login --name acaregistry</code>. Derefter b\u00f8r den tidligere kommando for at hente billedet ned fungerer.</p> <p>Hvis billedet bliver hentet korrekt vil det dukke up under <code>images</code> i docker desktop.</p>"},{"location":"tools/convertool/#byg-billedet-selv","title":"Byg billedet selv","text":"<p>Alternativt kan man ogs\u00e5 bygge billedet selv. Dette kr\u00e6ver at man har en kopi a <code>convertool</code> repositoriet hentet ned p\u00e5 sin maskine. Man kan s\u00e5 \u00e5bne en terminal inde i roden af repositoriet, og k\u00f8re f\u00f8lgende kommandoen:</p> <p><code>docker buildx build -f Dockerfile . -t latest</code></p> <p>Docker vil s\u00e5 bygge et lokalt billede med tagget 'latest'. Det vil ogs\u00e5 dukke up under images i docker desktop.</p>"},{"location":"tools/convertool/#aben-en-docker-container-med-convertool-billedet-til-en-aflevering","title":"\u00c5ben en docker container med convertool billedet til en aflevering","text":"<p>For at begynde at konvetere en aflevering skal man \u00e5bne en convertool container, hvor man har mounted den aflevering man gerne vil konveterer ind. den nemmeste m\u00e5de at g\u00f8re dette p\u00e5 er ved at \u00e5bne en ny PowerShell terminal i roden af den aflvering man gerne vil arbejde med og k\u00f8re f\u00f8lgende kommando i en PowerShell terminal:</p> <p><code>docker run -v ${pwd}:/root/handins --it [BILLEDE-ID]</code></p> <p>Denne kommando g\u00f8r flere ting p\u00e5 en gang, s\u00e5 her er en gennemgang af hvad de forskellige dele af den g\u00f8r:</p> <ul> <li><code>-v ${pwd}:/root/handins</code> mounter den directory som ens shell er i lige nu ind i docker containeren som man starter op i folderen <code>/root/handins</code> i containeren. Dvs. at selvom containeren k\u00f8re i sit eget, lukkede milj\u00f8, skabes der her en '\u00e5bining' hvor den har direkte adgang til pr\u00e6cis denne mappe, som er lokalt p\u00e5 din egen maskine. De programmer der er i Docker containeren kan s\u00e5 arbejde p\u00e5 data i denne mappe, dvs. afleveringen.</li> <li><code>--it</code> er to flag, som fort\u00e6ller docker at den skal \u00e5ben en interactiv</li> <li><code>BILLEDE-ID</code> eller <code>IMAGE-ID</code> er et unikt ID som docker tildeler ethvert billede. Det kan findes ved at kalde kommandoen <code>docker image ls</code>. Kommandoen giver en liste af alle billeder som er lokalt p\u00e5 ens maskine. Alternativt kan man ogs\u00e5 \u00e5bne 'docker desktop', g\u00e5 under 'images' og i 'name' kollonen er ID'et til bileldet angivet under navnet p\u00e5 bileldet, samt med en genvej til at kopierer det fulde ID til udklipsholderen.</li> </ul> <p>N\u00e5r kommandoen er k\u00f8rt vil den \u00e5bne terminal v\u00e6re din eneste indgang ind i containeren. Bem\u00e6rk at hvis du lukker terminallen uden at afslutte containeren med <code>exit()</code>, s\u00e5 k\u00f8re den videre i baggrunden og sluger resourcer. For at lukke den igen skal du \u00e5bne docker desktop og finde den under 'containers' her vil den st\u00e5 som v\u00e6rende k\u00f8rende, og de kan lukke den herinde.</p>"},{"location":"tools/convertool/#arbejd-videre-pa-en-tidligere-container","title":"Arbejd videre p\u00e5 en tidligere container","text":"<p>Frem for at starte en container op hver dag du skal arbejde p\u00e5 en aflevering, s\u00e5 kan man med fordel bare benytte den container man havde startet op sidste gang. Man kan finde containeren under 'containers' i docker desktop, og kan starte den ved at trykke p\u00e5 'start' ud fra den. Man kan s\u00e5, n\u00e5r containeren er startet, klikke p\u00e5 de 3 prikker ud fra den og \u00e5bne en terminal enten i 'docker desktop' eller eksternt, som s\u00e5 er i containeren og har de tidligere mapper mounted ind.</p> <p>Man kan ogs\u00e5 \u00e5bne containeren fra terminalen ved at kalde kommandoen:</p> <p><code>docker start [CONTAINER-ID]</code></p> <p>Hvor [CONTAINER-ID] er det ID som containeren f\u00e5r tildelt af docker n\u00e5r du starter den op f\u00f8rste gang. Du kan se det under \u00b4containers\u00b4 panellet i docker desktop, eller ved at skrive:</p> <p><code>docker ps -a</code></p> <p>Som lister alle containere, b\u00e5de dem der k\u00f8re og dem der ikke g\u00f8r.</p>"},{"location":"tools/convertool/#opbygning-af-convertool","title":"Opbygning af convertool","text":"<p>CLI'en er opbygget som f\u00f8lger.</p> <pre><code>convertool [OPTIONS] [ARGS] [COMMAND] \n</code></pre> <p>Argumenter, optioner, og kommandoer er beskrevet i det f\u00f8lgende.</p>"},{"location":"tools/convertool/#argumenter","title":"Argumenter","text":"<p>Convertool har to inputargumenter, som begge er p\u00e5kr\u00e6vede: <code>FILES</code> og <code>OUTDIR</code>. <code>FILES</code> skal angive stien til den <code>files.db</code> fil, der tidligere i processen er genereret af Digiarch, mens <code>OUTDIR</code> skal angive stien, hvori de konverterede filer skal gemmes.</p> <p>Eksempel</p> <pre><code>convertool D:\\filer\\AVID.AARS.3.1\\_metadata\\files.db D:\\filer\\out [COMMAND]\n</code></pre> <p>Convertool genererer selv en mappe baseret p\u00e5 AARS-ID'et, og det er derfor kun n\u00f8dvendigt at angive en overordnet folder i <code>OUTDIR</code>.</p>"},{"location":"tools/convertool/#optioner","title":"Optioner","text":"<p>Convertool har 5 optioner. Som udgangspunk ter disse ikke p\u00e5kr\u00e6vede, bortset fra option 4, som skal bruges hvis kommandoen (se kommandoer) <code>replacepdf</code> kaldes:</p> <ol> <li><code>--threshold</code> angiver det maksimale antal fejl, der m\u00e5 ske under konvertering</li> <li><code>--help</code> printer hj\u00e6lp</li> <li><code>--version</code> printer versionen af Convertool</li> <li><code>--pdf_1_7</code> Angiver at convertool kun skal indl\u00e6se PDF 1.7 filer. Denne Option skal bruges sammen med kammandoen <code>replacepdf</code> for at konvertere og                 overskrive de PDF 1.7 filer som er tilbage efter f\u00f8rste gennemk\u00f8rsel.</li> <li><code>--check_empty</code> hvis den er sat til 1, dvs. <code>--check_empty=1</code>, s\u00e5 tjekker convertool om nogle af de filer der er blevet converteret er tomme filer.</li> </ol> <p><code>--threshold</code> kan bruges, hvis man \u00f8nsker, at Convertool accepterer et andet antal fejl end standardv\u00e6rdien. Standardv\u00e6rdien udregnes som kvadratroden af det totale antal filer. Hvis f\u00e5 filer konverteres, kan det v\u00e6re fordelagtigt at s\u00e6tte <code>--threshold</code> til <code>0</code>, da konvertering s\u00e5 stopper, f\u00f8rste gang en fejl h\u00e6nder. Det er dog ikke anbefalet for st\u00f8rre m\u00e6ngder filer.</p> <p>Eksempel</p> <pre><code>convertool --threshold=0 D:\\filer\\AVID.AARS.3.1\\_metadata\\files.db D:\\filer\\out [COMMAND]\n</code></pre> <p><code>--help</code> og <code>--version</code> kan som de eneste kaldes uden at angive argumenter, da de blot giver information om selve CLI'en.</p> <p>Eksempel</p> <pre><code>convertool --help\nconvertool --version\n</code></pre> <p>Eksempel</p> <pre><code>convertool --pdf_1_7=1 D:\\filer\\AVID.AARS.3.1\\_metadata\\files.db D:\\filer\\out replacepdf\n</code></pre>"},{"location":"tools/convertool/#kommandoer","title":"Kommandoer","text":"<p>Convertool har 3 kommandoer kaldet <code>main</code>, <code>tiff</code> og <code>replacepdf</code>.</p> <ul> <li>main</li> </ul> <p>Denne kommando konverterer filer til Aarhus Stadsarkivs pr\u00e6definerede Master-formater. Disse er blandt andre Open Document Text for alle Word-lignende filer, PDF/A for PDF-filer, og TIFF for billedfiler.</p> <p>Eksempel</p> <pre><code>convertool D:\\filer\\AVID.AARS.3.1\\_metadata\\files.db D:\\filer\\out main\n</code></pre> <ul> <li>statutory</li> </ul> <p>Denne kommando konverterer Master-filer til deres arkivformat i overenstemmelse med g\u00e6ldende lovgivning. Syntaksen for at bruge kommandoen er den samme som <code>main</code>, hvor <code>main</code> erstattes med <code>statutory</code>.</p> <ul> <li>replacepdf</li> </ul> <p>Denne kommando k\u00f8re funktionen <code>replace</code> fra replace_pdf.py p\u00e5 de restederende PDF 1.7 filer som indl\u00e6ses ved brug af optionen <code>--pdf_1_7</code>. Da funktionen bruger GhostScript, kan den multiprocesses og k\u00f8re flere konverteringer parallelt. Et eksempel p\u00e5 brugen kan ses under beskrivelsen af <code>--pdf_1_7</code>.</p>"},{"location":"tools/convertool/#konvertering","title":"Konvertering","text":"<p>N\u00e5r Convertool s\u00e6ttes i gang med at konvertere, er der ikke umiddelbart behov for yderligere brugerinput. Konvertering tager i gennemsnit 2s/fil, og det kan derfor v\u00e6re fordelagtigt at have processen k\u00f8rende i baggrunden, mens man tager sig af andre opgaver.</p> <p>Under konvertering skrives ogs\u00e5 til en logfil, <code>convertool.log</code>, der kan findes i <code>_metadata</code> folderen under <code>OUTDIR\\AARS-ID</code>.</p>"},{"location":"tools/convertool/#fejlrettelser","title":"Fejlrettelser","text":"<p>Under konvertering kan forskellige fejl opst\u00e5. Disse vil typisk ikke stoppe et konverteringsjob, med mindre antallet af fejl overskrider det tilladte. Fejl opdages ved at kigge i <code>convertool.log</code>-filen, hvori de vil st\u00e5 som <code>WARNING</code>. N\u00e5r et job er afsluttet, skrives ogs\u00e5 en oversigt over antallet af fejl til sidst i log-filen.</p> <p>Eksempel</p> <p>I det f\u00f8lgende ses et uddrag af en <code>convertool.log</code>-fil. Succesfuld konvertering angives med <code>INFO</code>, fejl angives med <code>WARNING</code>, og til slut ses en oversigt over antal fejl. <pre><code>2021-02-25 19:25:48 INFO: Starting conversion of file.pdf\n2021-02-25 19:25:55 INFO: Converted file.pdf successfully.\n2021-02-26 09:19:36 WARNING: Failed to convert file.tif: Failed to save file.tif as TIF with error: Error setting from dictionary\n2021-02-25 19:25:55 INFO: Finished conversion of 11438 files with 15 issues, 7 of which were critical.\n</code></pre></p> <p>Der skelnes mellem kritiske og ikke-kritiske fejl. Ikke-kritiske fejl er typisk timeouts fra LibreOffice -- disse indikerer, at LibreOffice ikke havde tid nok til at konvertere filen, men at filen med al sandsynlighed er velformet, og kan konverteres manuelt. Nogle gange er det ogs\u00e5 fordelagtigt at give LibreOffice en chance mere, ved at k\u00f8re konverteringsjobbet igen.</p> <p>N\u00e5r filer konverteres manuelt, er det vigtigt at opdatere <code>_ConvertedFiles</code>-tabellen, s\u00e5ledes man bevarer oversigten over, hvilke filer der er konverterede. Dette g\u00f8res ved at inds\u00e6tte den manuelt konverterede fils ID og UUID, som vist i f\u00f8lgende eksempel.</p> <p>Antag, at en fil med ID <code>144</code> og UUID <code>cd61494b-4547-43e7-97c6-adbafc6e8bd</code> ikke er konverteret. Den fremg\u00e5r i <code>_NotConverted</code> som f\u00f8lger:</p> id uuid path aars_path puid signature warning 144 cd61494b-4547-43e7-97c6-adbafc6e8bd D:\\files\\AARS.TEST\\file.tif AARS.TEST\\file.tif fmt/335 Tagged Image File Filen kunne ikke konveteres <p>Til tider kan filer ikke konverteres, fordi de viser sig at v\u00e6re korrupte eller p\u00e5 anden vis fejlbeh\u00e6ftede. Alle filer, der ikke kan eller skal konverteres, skal noteres i et dokument kaldet \"Konverteringsfejl\", og herudover skal en TIFF-fil, der forklarer den specifikke fejl, bruges som erstatning for den konverterede fil. Disse erstatningsfiler kan findes her. Til slut skal dette dokument gemmes som TIFF og fremg\u00e5 i kontekstdokumentationen. Skabelonen til dokumentet kan findes her.</p> <p>Eksempel</p> <p>Dokumentet \"Konverteringsfejl\" kan se ud som f\u00f8lger. </p>"},{"location":"tools/convertool/#arbejdsgang","title":"Arbejdsgang","text":"<p>TODO</p>"},{"location":"tools/convertool/#convertool-quick-guide","title":"Convertool quick guide","text":"<ol> <li>\u00c5bn PowerShell</li> <li>Skriv <code>cd sti\\til\\data</code> f.eks. <code>cd E:\\batch_7\\AVID.AARS.61.1</code></li> <li>K\u00f8r <code>convertool .\\_metadata\\files.db OUTDIR main</code>, hvor <code>OUTDIR</code> f.eks. er <code>E:\\batch_7\\out</code></li> <li>Tjek fildatabasen</li> <li>Tjek logfilen i <code>_metadata\\convertool.log</code> for <code>WARNING</code>s. Ved ikke-kritiske fejl som f.eks. timeout k\u00f8res convertool igen som i trin 3.</li> <li>Tjek database og logfil igen. Refer\u00e9r til eksemplet i fejlrettelser, hvis der skal laves manuelle rettelser.</li> <li>Hvis der er filer, som ikke kan konverteres, skal dette noteres i dokumentet \"Konverteringsfejl\", som beskrevet i fejlrettelser.</li> </ol>"},{"location":"tools/digiarch/","title":"Digiarch","text":"<p>Digiarch er en CLI (Command-Line Interface), som benyttes til at indeksere og identificere digitale filer, vi modtager til bevaring. CLI'en producerer en SQLite database kaldet <code>files.db</code>, som indeholder oversigter og informationer om de relevante processerede filer.</p>"},{"location":"tools/digiarch/#installation-og-opdatering","title":"Installation og opdatering","text":"<p>Digiarch skal installeres via master branch med pipx:</p> <pre><code>pipx install git+https://github.com/aarhusstadsarkiv/digiarch.git\n</code></pre> <p>Test efterf\u00f8lgende installationen med f\u00f8lgende kommando:</p> <pre><code>digiarch --version\n</code></pre> <p>N\u00e5r man skal opdatere Digiarch, bruges <code>pipx</code> med <code>--upgrade</code>:</p> <pre><code>pipx upgrade digiarch\n</code></pre>"},{"location":"tools/digiarch/#forudstninger","title":"Foruds\u00e6tninger","text":"<p>Digiarch bruger Siegfried til identifikation af filer, og det er derfor en foruds\u00e6tning for fuld brug af Digiarch, at Siegfried er installeret og tilg\u00e6ngelig i <code>PATH</code> p\u00e5 systemet. Dette opn\u00e5s nemmest ved at installere Siegfried via Go. Det anbefales, at Go installeres med Chocolatey som f\u00f8lger.</p> <pre><code>choco install golang\n</code></pre> <p>Bem\u00e6rk</p> <p>Chocolatey skal altid bruges via en administrativ PowerShell.</p> <p>Givet en fungerende version af Go, foreg\u00e5r installation af Siegfried som f\u00f8lger.</p> <p><pre><code>go install github.com/richardlehane/siegfried/cmd/sf@latest\nsf -update\n</code></pre> Hvis Siegfried skal opdateres, foreg\u00e5r dette ogs\u00e5 gennem Go:</p> <pre><code>go install github.com/richardlehane/siegfried/cmd/sf@latest\nsf -update\n</code></pre> <p>Alternative installationsmetoder kan findes p\u00e5 Siegfrieds GitHub. Hvis ovenst\u00e5ende installation virker, men Siegfried ikke bliver opdateret ordentligt, kan det skyldes, at man har en manuel installation i sin <code>PATH</code>-milj\u00f8variabel. Placering af Siegfriedinstallationer tilg\u00e6ngelig i <code>PATH</code> kan findes som f\u00f8lger:</p> <pre><code>where.exe sf\n</code></pre>"},{"location":"tools/digiarch/#opbygning","title":"Opbygning","text":"<p>Digiarch er en CLI, og skal derfor benyttes direkte i for eksempel PowerShell. CLI'en er opbygget som f\u00f8lger.</p> <pre><code>digiarch [OPTIONS] [ARGS] [COMMAND] \n</code></pre> <p>Argumenter, optioner, og kommandoer er beskrevet i det f\u00f8lgende.</p>"},{"location":"tools/digiarch/#argumenter","title":"Argumenter","text":"<p>Digiarch har \u00e9t inputargument: stien til filerne, som skal behandles. Dette argument er p\u00e5kr\u00e6vet, og Digiarch kan k\u00f8res med kun dette som input. Det forventes, at stien har et AARS-ID.</p> <p>Eksempel</p> <pre><code>digiarch D:\\filer\\AVID.AARS.3.1\n</code></pre> <p>N\u00e5r Digiarch k\u00f8res som i ovenst\u00e5ende, indekseres filerne uden yderligere processering. Indeksering er yderligere forklaret her.</p>"},{"location":"tools/digiarch/#optioner","title":"Optioner","text":"<p>Digiarch har tre optioner, der, som navnet antyder, ikke er p\u00e5kr\u00e6vede:</p> <ol> <li><code>--reindex</code> genindekserer filer</li> <li><code>--help</code> printer hj\u00e6lp</li> <li><code>--version</code> printer versionen af Digiarch</li> </ol> <p><code>--reindex</code> er brugbar, hvis man har lavet manuelle \u00e6ndringer i filerne, som Digiarch har indekseret. I afsnittet om fejlrettelser beskrives situationer, hvori denne option kan v\u00e6re relevant.</p> <p>Eksempel</p> <pre><code>digiarch --reindex D:\\filer\\AVID.AARS.3.1\n</code></pre> <p><code>--help</code> og <code>--version</code> kan som de eneste kaldes uden at angive en sti, da de blot giver information om selve CLI'en.</p> <p>Eksempel</p> <pre><code>digiarch --help\ndigiarch --version\n</code></pre>"},{"location":"tools/digiarch/#kommandoer","title":"Kommandoer","text":"<p>Digiarch har en kommando: <code>process</code>, der processerer filerne, hvor checksum udregnes og identifikation af filformat foreg\u00e5r.</p> <p>Eksempel</p> <pre><code>digiarch D:\\filer\\AVID.AARS.3.1 process\n</code></pre>"},{"location":"tools/digiarch/#indeksering","title":"Indeksering","text":"<p>Indeksering af filer er en grundl\u00e6ggende funktion i Digiarch. N\u00e5r Digiarch kaldes f\u00f8rste gang i en folder med arkiveringsparate filer, gennemg\u00e5s folderstrukturen rekursivt, og et indeks over filerne opbygges. Dette indeks gemmes i databasen <code>files.db</code>, som er beskrevet yderligere i afsnittet om fildatabaser. </p> <p>Under indeksering tjekkes ogs\u00e5, om der er tomme foldere, og om foldere indeholder flere filer, da vi typisk forventer af arkiveringsparate afleveringer, at dette ikke er tilf\u00e6ldet.</p> <p>Digiarch genbruger dette filindeks, n\u00e5r filerne efterf\u00f8lgende skal behandles. Det er derfor vigtigt, at indekset holdes opdateret ved eventuelle \u00e6ndringer i filstrukturen. Man kan genindeksere ved brug af optionen <code>--reindex</code>, som beskrevet her.</p>"},{"location":"tools/digiarch/#processering","title":"Processering","text":"<p>Processering af filer til digital arkivering er Digiarchs hovedfunktion. Under processering bliver der udregnet SHA-256 checksummer, og filerne bliver identificeret via Siegfried, s\u00e5ledes de kan knyttes til en PRONOM-ID. </p> <p>PRONOM-ID'et er centralt for det videre arbejde med filer, da det giver et entydigt svar p\u00e5, hvilken filtype, der er tale om. Under processering tjekkes ogs\u00e5 for tomme filer, som gives en fejlbeskrivelse i PRONOM-ID'et. En filidentifikation er opbygget som f\u00f8lger.</p> PUID Signature Warning Eksempel <code>fmt/18</code> Acrobat PDF 1.4 - Portable Document Format Extension mismatch <p>I ovenst\u00e5ende tabel bruges <code>fmt/18</code> som eksempel. Dette er et Acrobat PDF version 1.4 dokument. I dette tilf\u00e6lde er der ogs\u00e5 knyttet en advarsel p\u00e5, fordi filen i dette eksempel ikke har den korrekte filendelse. De fleste filer i en aflevering vil have et PUID og en signatur uden en tilknyttet advarsel. Det er derfor prim\u00e6rt vigtigt at tage h\u00e5nd om de filer, der har tilknyttede advarsler. Fildatabasen, som Digiarch genererer, indeholder derfor blandt andet brugervenlige oversigter over filer, der har tilknyttede advarsler.</p>"},{"location":"tools/digiarch/#fildatabase","title":"Fildatabase","text":"<p>Som tidligere n\u00e6vnt genererer Digiarch en fildatabase, som indeholder oplysninger om de indekserede og eventuelt processerede filer. Denne database hedder <code>files.db</code> og befinder sig i <code>_metadata</code>-mappen. <code>files.db</code> er en SQLite database, og det kan derfor anbefales at installere DB Browser for SQLite, n\u00e5r man skal arbejde med fildatabaser fra Digiarch.</p> <p>I det f\u00f8lgende beskrives de tabeller og views, der eksisterer i <code>files.db</code>, n\u00e5r Digiarch har f\u00e6rdiggjort en k\u00f8rsel.</p>"},{"location":"tools/digiarch/#tabeller","title":"Tabeller","text":"<p><code>files.db</code> f\u00f8des med fire tabeller: <code>Files</code>, <code>Metadata</code>, <code>_EmptyDirectories</code>, og <code>_MultipleFiles</code>. Sidstn\u00e6vnte er pr\u00e6fikseret med <code>_</code> for at facilitere mere logisk sortering i DB Browser for SQLite. Tabellerne er bygget op som f\u00f8lger.</p> <p><code>Files</code></p> <p>Denne tabel er det prim\u00e6re filindeks, og indeholder oplysninger om alle filer fundet i filstrukturen, Digiarch behandler.</p> column required type description id true <code>int</code> Prim\u00e6rn\u00f8gle uuid true <code>str</code> Universally Unique ID 4 path true <code>str</code> Fuld sti til filen checksum false <code>str</code> SHA-256 checksum aars_path true <code>str</code> Sti med rod i AARS-mappen puid false <code>str</code> PRONOM ID signature false <code>str</code> Filsignatur warning false <code>str</code> Advarsel, hvis relevant <p><code>checksum</code>, <code>puid</code>, <code>signature</code>, og <code>warning</code> bliver udfyldt under processering. Disse vil derfor v\u00e6re <code>NULL</code>, hvis der kun er k\u00f8rt indeksering af filer.</p> <p><code>Metadata</code></p> <p>Denne tabel indeholder en oversigt over, hvorn\u00e5r Digiarch sidst er blevet k\u00f8rt p\u00e5 de relevante filer.</p> column required type description last_run true <code>datetime</code> Tidspunkt for seneste k\u00f8rsel processed_dir true <code>str</code> Den folder hvori Digiarch er kaldt file_count false <code>int</code> Antal indekserede filer total_size false <code>str</code> Samlet filst\u00f8rrelse <p><code>_EmptyDirectories_</code></p> <p>Denne tabel indeholder eventuelle mapper i filstrukturen, der er tomme.</p> column required type description path true <code>str</code> Den fulde sti til den tomme folder <p><code>_MultipleFiles_</code></p> <p>Denne tabel indeholder eventuelle mapper i filstrukturen, der indeholder mere end \u00e9n fil.</p> column required type description path true <code>str</code> Den fulde sti til folderen med flere filer"},{"location":"tools/digiarch/#views","title":"Views","text":"<p><code>files.db</code> f\u00f8des med to views: <code>_IdentificationWarnings</code> og <code>_SignatureCount</code>. Disse er bygget op som f\u00f8lger.</p> <p><code>_IdentificationWarnings</code></p> <p>Dette view har samme opbygning som <code>Files</code>-tabellen, men indeholder kun de filer, der har v\u00e6rdier i <code>warning</code>-kolonnen. Viewet er brugbart i forbindelse med fejlrettelser.</p> column type description id <code>int</code> Prim\u00e6rn\u00f8gle uuid <code>str</code> Universally Unique ID 4 path <code>str</code> Fuld sti til filen checksum <code>str</code> SHA-256 checksum aars_path <code>str</code> Sti med rod i AARS-mappen puid <code>str</code> PRONOM ID signature <code>str</code> Filsignatur warning <code>str</code> Advarsel <p><code>_SignatureCount</code></p> <p>Dette view viser en oversigt over antallet af signaturer og PUID'er, der findes i fildatabasen. Viewet er brugbart til at vurdere, hvilke filer der skal h\u00e5ndteres, og hvorledes konvertering skal foreg\u00e5.</p> column type description puid <code>str</code> PRONOM ID signature <code>str</code> Filsignatur count <code>int</code> Samlet antal"},{"location":"tools/digiarch/#fejlrettelser","title":"Fejlrettelser","text":"<p>N\u00e5r filer til arkivering er blevet indekserede og processerede, vil der typisk v\u00e6re en andel, der er fejlbeh\u00e6ftede. Der er overordnet fem typer fejl, som bliver gennemg\u00e5et i det f\u00f8lgende.</p>"},{"location":"tools/digiarch/#extension-mismatch","title":"Extension mismatch","text":"<p>Denne fejl indikerer, at det er lykkedes at finde en filsignatur, men at den aktuelle filendelse ikke stemmer overens med den forventede. Dette kan for eksempel v\u00e6re en PDF-fil, der er gemt som <code>.tiff</code>. </p> <p>Digiarch-kommandoen <code>fix</code> kan med fordel bruges til at rette visse pr\u00e6definerede Extension mismatch fejl. Det er dog ikke alle fejl, <code>fix</code> kan rette, og man m\u00e5 derfor belave sig p\u00e5, at nogle filer skal rettes manuelt, hvis muligt. Dette g\u00f8res typisk ved at sl\u00e5 PRONOM-ID'et op i PRONOM-databasen, hvor den korrekte filendelse vil v\u00e6re at finde under \"Signatures\".</p> <p>Bem\u00e6rk</p> <p>N\u00e5r der laves manuelle rettelser af filer, skal Digiarch k\u00f8res igen med <code>--reindex</code>-optionen, s\u00e5ledes de opdaterede filer bliver indekseret korrekt.</p>"},{"location":"tools/digiarch/#match-on-text-only-extension-mismatch","title":"Match on text only; extension mismatch","text":"<p>Denne fejl indikerer, at der er tale om en tekstfil, men at filendelsen ikke stemmer overens med de forventede, e.g. <code>.txt</code>, <code>.csv</code> mv. Disse filer skal manuelt inspiceres, og kan typisk gemmes som <code>.txt</code> p\u00e5 sikker vis, med mindre det er tydeligt, at der er tale om en anden filtype.</p>"},{"location":"tools/digiarch/#match-on-extension-only","title":"Match on extension only","text":"<p>Denne fejl bruges, n\u00e5r filsignaturen ikke er entydigt bestemt, men derimod prim\u00e6rt beror p\u00e5 filendelsen. Dette er for eksempel tilf\u00e6ldet med <code>.csv</code> filer, da de bytem\u00e6ssigt blot er tekstfiler, og man derfor bruger filendelsen til den endelige signatur. Der kan sagtens v\u00e6re tale om en korrekt identifikation, men det er vigtigt at forholde sig til. </p>"},{"location":"tools/digiarch/#no-match","title":"No match","text":"<p>Denne fejl indikerer, at der ikke er fundet noget PRONOM-ID og derfor ikke nogen filsignatur. Dette kan betyde flere ting: filen er korrupt, filen er gemt med fejl men stadig konverterbar, eller filtypen findes ikke i PRONOM-databasen. I alle tilf\u00e6lde er der behov for manuel inspektion. </p> <p>Bem\u00e6rk</p> <p>Til tider er PDF-filer gemt forkert p\u00e5 en m\u00e5de, hvor der er en masse tomme bytes efter <code>%EOF</code>-signaturen til sidst i filen. Disse filer kan typisk reddes ved at blive \u00e5bnet i en PDF-viewer og gemt igen, hvorefter de tomme bytes er v\u00e6k. </p> <p>Hvis en fil viser sig at v\u00e6re korrupt, kan man med fordel tildele den PUID'et <code>aca-error/2</code> med signaturen <code>File is corrupt</code>. Hermed kan Convertool automatisk indf\u00f8re erstatningsfiler under konvertering. Det er vigtigt at dokumentere korrupte filer i <code>Konverteringsfejl</code>-dokumentet.</p>"},{"location":"tools/digiarch/#empty-file","title":"Empty file","text":"<p>Denne fejl indikerer, at filen er tom, og tomme filer har per definition ikke en gyldig filsignatur. Tomme filer skal dokumenteres i <code>Konverteringsfejl</code>-dokumentet, men man beh\u00f8ver ikke g\u00f8re yderligere; Convertool indf\u00f8rer automatisk erstatningsfiler.</p>"},{"location":"tools/digiarch/#arbejdsgang","title":"Arbejdsgang","text":"<p>Som opsummering kommer her en oversigt over arbejdsgangen med Digiarch.</p> <ol> <li>\u00c5bn PowerShell</li> <li>Skriv <code>cd sti\\til\\data</code> f.eks. <code>cd E:\\batch_7\\AVID.AARS.61.1</code></li> <li>K\u00f8r <code>digiarch . process</code></li> <li>Tjek fildatabasen <code>files.db</code> som befinder sig i <code>_metadata</code>-mappen</li> <li>Hvis rettelse af filendelsesfejl er n\u00f8dvendigt, k\u00f8r da <code>digiarch . fix</code></li> <li>Tjek fildatabasen igen</li> <li>Hvis der laves manuelle rettelser, k\u00f8r da <code>digiarch --reindex . process</code></li> </ol> <p>Efter konverteringen har k\u00f8rt kan det v\u00e6re en fordel at bruge f\u00f8lgende sql statement i en database genereret af Digiarch for at f\u00e5 et bedre overblik over filer, som mangler at blive konverteret. <pre><code>CREATE VIEW \"_NotConvertedOverview\" AS SELECT puid, signature, COUNT(puid) FROM _NotConverted GROUP BY puid ORDER BY (COUNT(puid)) DESC\n</code></pre></p> <p>Denne sql statement generere et view med f\u00f8lgende opbygning:</p> column type description puid <code>str</code> PRONOM ID signature <code>str</code> Filsignatur count <code>int</code> Antallet af filer, som mangler at blive konverteret."},{"location":"tools/filezilla/","title":"FileZilla","text":"<p>Bekriver arbejdet med FileZilla.</p>"},{"location":"tools/find-relations/","title":"find-relations","text":"<p>Dette program konverterer SQLite-databaser til specielle filer for hurtigere s\u00f8gning af relationer mellem tabeller.</p>"},{"location":"tools/find-relations/#installation","title":"Installation","text":"<p>find-relations skal installeres via master branch med pipx:</p> <pre><code>pipx install git+https://github.com/aarhusstadsarkiv/find-relations.git\n</code></pre>"},{"location":"tools/find-relations/#brug","title":"Brug","text":"<pre><code>find-relations [OPTIONS] COMMAND [ARGS]...\n\nOptions:\n  --help  Show this message and exit.\n\nCommands:\n  encode  Encode a database.\n  search  Search an encoded database.\n</code></pre> <p>Det f\u00f8rste trin er at konvertere databasen ved hj\u00e6lp af kommandoen <code>encode</code>.</p> <p>N\u00e5r den nye fil er klar, kan <code>search</code>-kommandoen s\u00f8ge efter specifikke v\u00e6rdier.</p>"},{"location":"tools/find-relations/#encode","title":"encode","text":"<pre><code>find-relations encode [OPTIONS] FILE [OUTPUT]\n\nOptions:                                                                      \n  --hash NAME     The hash algorithm to use.  [default: md5]\n  --sample ROWS   Encode a random sample of ROWS rows for each table.  [x&gt;=1]\n  --ignore-types  Do not encode type information.\n  --help          Show this message and exit.\n</code></pre> <p>Konvert en SQLite-database <code>FILE</code> til et s\u00f8gbart format, der indeholder hasherne for hver celles v\u00e6rdi.</p> <p>Resultatfilen vil blive gemt som <code>OUTPUT</code> eller som <code>FILE</code>.dat.</p> <p>Altid tilg\u00e6ngelige hash-algoritmer er: blake2b, blake2s, md5, sha1, sha224, sha256, sha384, sha3_224, sha3_256, sha3_384, sha3_512, sha512, shake_128, shake_256.</p>"},{"location":"tools/find-relations/#search","title":"search","text":"<pre><code>find-relations search [OPTIONS] FILE\n\nOptions:\n  --value &lt;SQL-TYPE JSON-VALUE&gt;  Search for a specific value.\n  --cell &lt;TABLE ROW COLUMN&gt;      Search for the value in a cell.\n  --column &lt;TABLE COLUMN&gt;        Search for all values in column.\n  --max-results INTEGER          Stop after INTEGER results.  [x&gt;=1]\n  --include-null                 Do not skip null values.\n  --show-all-results             Do not aggregate results.\n  --help                         Show this message and exit.\n</code></pre> <p>S\u00f8g efter specifikke v\u00e6rdier, celler eller kolonner i en konverteret <code>FILE</code>.</p> <p>Se <code>find-relations encode</code> for hj\u00e6lp til at konvertere en database.</p>"},{"location":"tools/ghostscript/","title":"Ghostscript","text":"<p>Ghostscript er en s\u00e5kaldt interpreter til PostScript-sproget og PDF-filer. Et typisk brugsscenarie p\u00e5 Aarhus Stadsarkiv er konvertering af PDF'er til PDF/A-format.</p>"},{"location":"tools/ghostscript/#installation","title":"Installation","text":"<p>Ghostscript kan installeres via Chocolatey</p> <p><pre><code>choco install ghostscript.app\n</code></pre> eller via download af en <code>.exe</code>-fil her. </p> <p>Husk</p> <p>Chocolatey skal altid bruges via en administrativ PowerShell.</p>"},{"location":"tools/ghostscript/#systemmiljvariable","title":"Systemmilj\u00f8variable","text":"<p>Det er n\u00f8dvendigt at tilf\u00f8je <code>bin</code>-folderen i installationslokationen til brugeres <code>PATH</code>-milj\u00f8variabel. Den typiske sti er <code>C:\\Program Files\\gs\\gs[version]\\bin</code>.</p> <p>Eksempel</p> <p>Antag, at Ghostscript version 9.53.3 er installeret. F\u00f8lgende sti skal nu tilf\u00f8jes til <code>PATH</code>. <pre><code>C:\\Program Files\\gs\\gs9.53.3\\bin\n</code></pre></p> <p>Systemmilj\u00f8variable opdateres som f\u00f8lger.</p> <ul> <li> <p>Find indstillingen \"Rediger systemmilj\u00f8variablerne\"</p> <p></p> </li> <li> <p>Du kommer nu ind i \"Egenskaber for system\". Tryk her p\u00e5 \"Milj\u00f8variabler\".</p> <p></p> </li> <li> <p>Find <code>Path</code> i milj\u00f8variabler og tryk \"rediger\".</p> </li> </ul> <p></p> <ul> <li> <p>Tryk p\u00e5 \"Ny\" og tilf\u00f8j den \u00f8nskede sti.</p> <p></p> </li> </ul>"},{"location":"tools/gis_processor/","title":"Gisprocessor","text":"<p>gis_processor bruges til at flytte alle filerne fra de enkelte GIS-projekter sammen i en mappe for hvert GIS-projekt, s\u00e5 de kan identificeres og konverteres rigtigt.</p>"},{"location":"tools/gis_processor/#installation","title":"Installation","text":"<p>Gisprocessor skal installeres via master branch med pipx:</p> <pre><code>pipx install git+https://github.com/aarhusstadsarkiv/gis_processor.git\n</code></pre> <p>Test efterf\u00f8lgende installationen med f\u00f8lgende kommando:</p> <pre><code>gisprocessor --version\n</code></pre> <p>N\u00e5r man skal opdatere gisprocessor, bruges <code>pipx</code> med <code>--upgrade</code>:</p> <pre><code>pipx upgrade gisprocessor\n</code></pre>"},{"location":"tools/gis_processor/#brug","title":"Brug","text":"<p>Gisprocessor har to kommandoer, nemlig <code>g-json</code> og <code>move</code>. N\u00e5r man er igang med at klarg\u00f8re en aflevering, skal begge kommandoer k\u00f8res (f\u00f8rst <code>g-json</code> dern\u00e6st <code>move</code>)</p> <p><code>g-json</code> genererer en json-fil der viser, hvad v\u00e6rkt\u00f8jet flytter.</p> <p><code>move</code> flytter GIS-filerne i json-filen.</p> <p>N\u00e5r man k\u00f8rer <code>g-json</code>-kommandoen sp\u00f8rger den om stien til av.db-filen. Den kan findes i den _metadata-mappe der ligger i roden af afleveringen. N\u00e5r j-son-filen er dannet inspiceres denne f\u00f8r move-kommandoen k\u00f8res, for at sikre at de rette filer bliver flyttet.</p> <p>Eksempel</p> <pre><code>gisprocessor g-json\n\nEnter full path to av.db file: D:\\AVID.AARS.84.1\\_metadata\\AVID.AARS.84.av.db\n</code></pre> <p>Den af g-json-kommandoen genererede json-fil findes ogs\u00e5 i denne _metadata mappe. move-kommandoen sp\u00f8rger om stien dertil.</p>"},{"location":"tools/libreoffice/","title":"LibreOffice","text":"<p>LibreOffice er et office-program ligesom Microsoft Office. P\u00e5 Aarhus Stadsarkiv bruges LibreOffice prim\u00e6rt til at producere Open Document-versioner af Microsoft Office-filer. </p>"},{"location":"tools/libreoffice/#installation","title":"Installation","text":"<p>LibreOffice kan installeres via Chocolatey</p> <p><pre><code>choco install libreoffice-fresh\n</code></pre> eller via download af en <code>.exe</code>-fil her. </p> <p>Husk</p> <p>Chocolatey skal altid bruges via en administrativ PowerShell.</p>"},{"location":"tools/libreoffice/#systemmiljvariable","title":"Systemmilj\u00f8variable","text":"<p>Det er n\u00f8dvendigt at tilf\u00f8je <code>program</code>-folderen i installationslokationen til brugeres <code>PATH</code>-milj\u00f8variabel. Den typiske sti er <code>C:\\Program Files\\LibreOffice\\program</code>.</p> <p>Systemmilj\u00f8variable opdateres som f\u00f8lger.</p> <ul> <li> <p>Find indstillingen \"Rediger systemmilj\u00f8variablerne\"</p> <p></p> </li> <li> <p>Du kommer nu ind i \"Egenskaber for system\". Tryk her p\u00e5 \"Milj\u00f8variabler\".</p> <p></p> </li> <li> <p>Find <code>Path</code> i milj\u00f8variabler og tryk \"rediger\".</p> </li> </ul> <p></p> <ul> <li> <p>Tryk p\u00e5 \"Ny\" og tilf\u00f8j den \u00f8nskede sti.</p> <p></p> </li> </ul>"},{"location":"tools/pipx/","title":"Pipx","text":"<p>Pipx er en wrapper rundt om pip, og bruges til at installere Python-baserede commandline v\u00e6rkt\u00f8jer. L\u00e6s alt om Pipx p\u00e5 deres [dokumentationsportal](Pipx.</p>"},{"location":"tools/pipx/#installation-og-opdatering","title":"Installation og opdatering","text":"<p>Pipx skal naturligvis installeres f\u00f8r alle de python-baserede commandline v\u00e6rkt\u00f8jer, der installeres via pipx.</p> <p><pre><code>python -m pip install --user pipx\npipx ensurepath\n</code></pre> Den sidste kommando tilf\u00f8jer b\u00e5de <code>&lt;USER folder&gt;\\AppData\\Roaming\\Python\\Python3x\\Scripts</code> og <code>%USERPROFILE%\\.local\\bin</code> mappen til din <code>path</code> milj\u00f8variabel. Genstart termionalen for at teste om \u00b4pipx\u00b4 virker.</p> <p>Upgrade pipx med pip: <pre><code>python -m pip install --user pipx\n</code></pre></p>"},{"location":"tools/rearranger/","title":"Rearranger","text":"<p>Rearranger bruges til at flytte udpakkede filer over i nye mapper, s\u00e5 de ligger i hver deres mappe.</p>"},{"location":"tools/rearranger/#installation","title":"Installation","text":"<p>Rearranger skal installeres via master branch med pipx:</p> <pre><code>pipx install git+https://github.com/aarhusstadsarkiv/rearranger.git\n</code></pre> <p>Test efterf\u00f8lgende installationen med f\u00f8lgende kommando:</p> <pre><code>rearranger --version\n</code></pre> <p>N\u00e5r man skal opdatere rearranger, bruges <code>pipx</code> med <code>--upgrade</code>:</p> <pre><code>pipx upgrade rearranger\n</code></pre>"},{"location":"tools/rearranger/#brug","title":"Brug","text":"<p>Rearranger bruges ved f\u00f8lgende kommando:</p> <p><pre><code>rearranger docCollection_dir newDocCollectionNumber dIDCounter newTableNumber\n</code></pre> Hvor \"docCollection_dir\" er den fulde sti til den mappe, hvori <code>docCollection1</code>-mapperne ligger (eg. <code>OriginalFiles</code>); \"newDocCollectionNumber\" er nummeret p\u00e5 den nye docCollection-mappe, hvortil filerne flyttes (hvis der i forvejen er 3 docCollections vil den nye mappes nummer v\u00e6re <code>4</code>); \"dIDCounter\" er den sidste fil i den sidste docCollections nummer + 1 (hvis der er 34875 filer vil nummeret v\u00e6re <code>34876</code>), og \"newTableNumber\" er antallet af eksisterende tables (i tables-mappen) + 1 (dvs. at hvis der er 10 tables vil tallet v\u00e6re <code>11</code>).</p> <p>Eksempel</p> <pre><code>rearranger D:\\AVID.AARS.84.1\\OriginalFiles 4 34876 11\n</code></pre>"},{"location":"tools/renamer/","title":"Renamer","text":"<p><code>renamer</code> er et commandline v\u00e6rkt\u00f8j til omd\u00f8bning af filer. Oftest brugt i forbindelse med konverteringsprocesser, hvor filer med manglende eller fejlagtig filendelse ofte vil skabe problemer i den senere konverteringsproces.</p>"},{"location":"tools/renamer/#installation","title":"Installation","text":"<p>Renamer skal installeres via master branch med pipx:</p> <pre><code>pipx install git+https://github.com/aarhusstadsarkiv/renamer.git\n</code></pre> <p>Test efterf\u00f8lgende installationen med f\u00f8lgende kommando:</p> <pre><code>renamer --version\n</code></pre> <p>N\u00e5r man skal opdatere renamer, bruges <code>pipx</code> med <code>--upgrade</code>:</p> <pre><code>pipx upgrade renamer\n</code></pre>"},{"location":"tools/renamer/#brug","title":"Brug","text":"<p>Ved warningen \"Extension mismatch\" i DB Browser identificeres, hvilken filendelse filen burde have.</p> <p>Dern\u00e6st bruges f\u00f8lgende kommando til at \u00e6ndre filendelsen:</p> <pre><code>renamer db_file_path puid new_extension_without_period_sign\n</code></pre> <p>I nedenst\u00e5ende eksempel giver renamer alle puid fmt/340 filendelsen lwp</p> <p>Eksempel</p> <pre><code>renamer D:\\AVID.AARS.77.1\\OriginalFiles\\_metadata\\files.db fmt/340 lwp\n</code></pre>"},{"location":"tools/renamer/#filendelser","title":"Filendelser","text":"<p>Ved extension mismatch-warnings, hvor digiarch har givet en fil et PUID der ikke stemmer overens med dens extension (eller mangel p\u00e5 samme), kan der opst\u00e5 tvivl om hvilken extension filen burde have, da dette ikke er angivet i <code>files.db</code>.  Her bruges National Archives' hjemmeside <code>pronom</code> til at unders\u00f8ge, hvilken filendelse filen skal have. I de tilf\u00e6lde, hvor der er flere muligheder kan man evt. kigge p\u00e5 andre filer i afleveringen med samme PUID.  For aca-PUID'er (vores egne) bruges f\u00f8lgende liste:</p> PUID extension aca-fmt/1 .123 aca-fmt/2 .doc aca-fmt/3 .xls aca-fmt/4 .mmap aca-fmt/5 .ntf aca-fmt/6 .adx aca-fmt/7 .id aca-fmt/8 .nsf aca-fmt/9 .dat aca-fmt/10 .mdb aca-fmt/11 .mdb aca-fmt/12 .mdb aca-fmt/13 .mdb aca-fmt/14 .mdb aca-fmt/15 .mdb"},{"location":"tools/symphovert/","title":"Symphovert","text":"<p>Symphovert er en CLI (Command-Line Interface), som benyttes til at konvertere filer, s\u00e5ledes de overholder Aarhus Stadsarkivs arkiveringskrav. Der l\u00e6ses fra DB-filen produceret af Digiarch.</p>"},{"location":"tools/symphovert/#installation","title":"Installation","text":"<p>Symphovert skal installeres via releases p\u00e5 GitHub. Download f\u00f8rst den seneste <code>.whl</code>-fil, og install\u00e9r herefter denne via <code>pip</code>.</p> <p>Eksempel</p> <pre><code>pip install --user C:\\Downloads\\symphovert-0.2.1-py3-none-any.whl\n</code></pre> <p>Bem\u00e6rk</p> <p>Installation via <code>.whl</code>-filer kr\u00e6ver, at pakken <code>wheel</code> er installeret. Dette skal kun foreg\u00e5 f\u00f8rste gang man har behov for at installere wheels, og det g\u00f8res som f\u00f8lger. <pre><code>pip install --user wheel\n</code></pre></p> <p>N\u00e5r Symphovert skal opdateres, bruges igen <code>pip</code> med en ny <code>.whl</code>-fil og <code>--upgrade</code>.</p> <p>Eksempel</p> <pre><code>pip install --user --upgrade C:\\Downloads\\symphovert-[new version]-py3-none-any.whl\n</code></pre>"},{"location":"tools/symphovert/#forudstninger","title":"Foruds\u00e6tninger","text":"<p>Symphovert g\u00f8r brug af IBM Lotus Symphony. Det er vigtigt, at installationslokationen tilf\u00f8jes til brugerens <code>PATH</code>-milj\u00f8variabel p\u00e5 lige fod med LibreOffice. Den typiske sti er <code>C:\\Program Files (x86)\\IBM\\Lotus\\Symphony</code>.</p>"},{"location":"tools/symphovert/#opbygning","title":"Opbygning","text":"<p>Symphovert er en CLI, og skal derfor benyttes direkte i for eksempel PowerShell. CLI'en er opbygget som f\u00f8lger.</p> <pre><code>symphovert [OPTIONS] [ARGS] [COMMAND] \n</code></pre> <p>Argumenter, optioner, og kommandoer er beskrevet i det f\u00f8lgende.</p>"},{"location":"tools/symphovert/#argumenter","title":"Argumenter","text":"<p>Symphovert har to inputargumenter, som begge er p\u00e5kr\u00e6vede: <code>FILES</code> og <code>OUTDIR</code>. <code>FILES</code> skal angive stien til den <code>files.db</code> fil, der tidligere i processen er genereret af Digiarch, mens <code>OUTDIR</code> skal angive stien, hvori de konverterede filer skal gemmes.</p> <p>Eksempel</p> <pre><code>symphovert D:\\filer\\AVID.AARS.3.1\\_metadata\\files.db D:\\filer\\out [COMMAND]\n</code></pre> <p>Symphovert genererer selv en mappe baseret p\u00e5 AARS-ID'et, og det er derfor kun n\u00f8dvendigt at angive en overordnet folder i <code>OUTDIR</code>.</p>"},{"location":"tools/symphovert/#optioner","title":"Optioner","text":"<p>Symphovert har to optioner, der, som navnet antyder, ikke er p\u00e5kr\u00e6vede:</p> <ol> <li><code>--help</code> printer hj\u00e6lp</li> <li><code>--version</code> printer versionen af Symphovert</li> </ol> <p>Bem\u00e6rk, at Symphovert ikke har en <code>--threshold</code>-option. Dette er fordi det forventes, at der sker relativt mange fejl i konvertering med Symphovert, og det derfor bedst giver mening bare at lade den fors\u00f8ge.</p> <p><code>--help</code> og <code>--version</code> kan som de eneste kaldes uden at angive argumenter, da de blot giver information om selve CLI'en.</p> <p>Eksempel</p> <pre><code>symphovert --help\nsymphovert --version\n</code></pre>"},{"location":"tools/symphovert/#kommandoer","title":"Kommandoer","text":"<p>Symphovert har pt. \u00e9n kommando kaldet <code>main</code>. Denne kommando konverterer filer til Aarhus Stadsarkivs pr\u00e6definerede Master-formater. Disse er blandt andre Open Document Text for alle Word-lignende filer, PDF/A for PDF-filer, og TIFF for billedfiler.</p> <p>Eksempel</p> <pre><code>symphovert D:\\filer\\AVID.AARS.3.1\\_metadata\\files.db D:\\filer\\out main\n</code></pre> <p>I fremtiden skal Symphovert ogs\u00e5 kunne h\u00e5ndtere konvertering af alle Master-filer til arkiveringsformater, s\u00e5ledes der kan genereres juridiske afleveringer. Dette b\u00f8r v\u00e6re en separat kommando.</p>"},{"location":"tools/symphovert/#konvertering","title":"Konvertering","text":"<p>N\u00e5r Symphovert s\u00e6ttes i gang med at konvertere, er der ikke umiddelbart behov for yderligere brugerinput. Konvertering tager i gennemsnit 20s/fil.</p> <p>Bem\u00e6rk</p> <p>Symphovert-konvertering er en s\u00e6rdeles ustabil proces. Det anbefales at v\u00e6bne sig med t\u00e5lmodighed, og man skal v\u00e6re forberedt p\u00e5 at skulle k\u00f8re konverteringen flere gange. \u00c5bn altid IBM Symphony f\u00f8r en konvertering, da en kold start for programmet er meget langsom.</p> <p>Vigtigt</p> <p>Det er ikke muligt at bruge den computer, Symphovert k\u00f8rer p\u00e5, samtidig med konvertering, da Symphovert overtager b\u00e5de mus- og tastaturinput.</p> <p>Under konvertering skriver Symphovert til tabellen <code>_ConvertedFiles</code> i den <code>files.db</code>, som Symphovert l\u00e6ser fra. I <code>files.db</code> laves ogs\u00e5 et s\u00e5kaldt view, <code>_NotConverted</code>, der p\u00e5 brugervenlig vis angiver de filer, der endnu ikke er konverteret. <code>_ConvertedFiles</code>-tabellen ser ud som f\u00f8lger.</p> <p><code>_ConvertedFiles</code></p> column required type description file_id true <code>int</code> Fremmedn\u00f8gle til <code>Files</code>-tabellen uuid true <code>str</code> Universally Unique ID 4 <p><code>_NotConverted</code>-viewet baserer sig p\u00e5 <code>_ConvertedFiles</code> og <code>Files</code>. Det ser ud som f\u00f8lger.</p> <p><code>_NotConverted</code></p> column required type description id true <code>int</code> ID fra <code>Files</code>-tabellen uuid true <code>str</code> Universally Unique ID 4 path true <code>str</code> Fuld sti til filen aars_path true <code>str</code> Sti med rod i AARS-mappen puid false <code>str</code> PRONOM ID signature false <code>str</code> Filsignatur warning false <code>str</code> Advarsel, hvis relevant <p>I afsnittet om fejlrettelser beskrives det, hvorledes <code>_ConvertedFiles</code> manuelt opdateres, hvis der er behov herfor.</p> <p>Under konvertering skrives ogs\u00e5 til en logfil, <code>symphovert.log</code>, der kan findes i <code>_metadata</code> folderen under <code>OUTDIR\\AARS-ID</code>.</p> <p>Eksempel</p> <p>Antag, at originalfilerne <code>D:\\filer\\AVID.AARS.3.1</code> bliver konverteret som f\u00f8lger. <pre><code>symphovert D:\\filer\\AVID.AARS.3.1\\_metadata\\files.db D:\\filer\\out main\n</code></pre> <code>_ConvertedFiles</code> og <code>_NotConverted</code> kan nu findes i databasefilen <code>D:\\filer\\AVID.AARS.3.1\\_metadata\\files.db</code>, mens logfilen kan findes i mappen <code>D:\\filer\\out\\AVID.AARS.3.1\\_metadata</code>.</p>"},{"location":"tools/symphovert/#fejlrettelser","title":"Fejlrettelser","text":"<p>Under konvertering kan fejl opst\u00e5. Faktisk er det mere eller mindre garanteret ved konvertering med Symphovert. Fejl opdages ved at kigge i <code>symphovert.log</code>-filen, hvori de vil st\u00e5 som <code>WARNING</code>. N\u00e5r et job er afsluttet, skrives ogs\u00e5 en oversigt over antallet af fejl til sidst i log-filen.</p> <p>Eksempel</p> <p>I det f\u00f8lgende ses et uddrag af en <code>symphovert.log</code>-fil. Succesfuld konvertering angives med <code>INFO</code>, fejl angives med <code>WARNING</code>, og til slut ses en oversigt over antal fejl. <pre><code>2021-02-25 19:25:48 INFO: Starting conversion of file.lwp\n2021-02-25 19:25:55 INFO: Converted file.lwp successfully.\n2021-02-26 09:19:16 INFO: Starting conversion of file_2.lwp\n2021-02-26 09:19:36 Failed to convert file_2.lwp: Conversion of file_2.lwp failed!\n2021-02-26 19:25:55 INFO: Finished conversion of 11438 files with 15 issues.\n</code></pre></p> <p>Alle fejl i konvertering med Symphovert er kritiske. Det anbefales at k\u00f8re konverteringsjobbet et par gange, og til sidst lave eventuelle manuelle rettelser. Hvis filen ikke kan \u00e5bnes i Symphony, kan man med fordel pr\u00f8ve i LibreOffice - nogle gange er outputtet herfra acceptabelt.</p> <p>N\u00e5r filer konverteres manuelt, er det vigtigt at opdatere <code>_ConvertedFiles</code>-tabellen, s\u00e5ledes man bevarer oversigten over, hvilke filer der er konverterede. Dette g\u00f8res ved at inds\u00e6tte den manuelt konverterede fils ID og UUID, som vist i f\u00f8lgende eksempel.</p> <p>Eksempel</p> <p>Antag, at en fil med ID <code>6</code> og UUID <code>1bac98f5-156c-4a8d-813c-39ac559b3e93</code> ikke er konverteret. Den fremg\u00e5r i <code>_NotConverted</code> som f\u00f8lger.</p> id uuid path aars_path puid signature warning 6 1bac98f5-156c-4a8d-813c-39ac559b3e93 D:\\files\\AARS.TEST\\file.lwp AARS.TEST\\file.lwp fmt/340 Lotus WordPro Document <p>Filen konverteres nu manuelt, og `_ConvertedFiles opdateres med f\u00f8lgende SQL-statement.</p> <pre><code>INSERT INTO _ConvertedFiles VALUES (6, \"1bac98f5-156c-4a8d-813c-39ac559b3e93\")\n</code></pre> <p>Herefter fremg\u00e5r filen ikke l\u00e6ngere i <code>_NotConverted</code>-viewet.</p> <p>Til tider kan filer ikke konverteres, fordi de viser sig at v\u00e6re korrupte eller p\u00e5 anden vis fejlbeh\u00e6ftede. Alle filer, der ikke kan eller skal konverteres, skal noteres i et dokument kaldet \"Konverteringsfejl\", og herudover skal en TIFF-fil, der forklarer den specifikke fejl, bruges som erstatning for den konverterede fil. Disse erstatningsfiler kan findes her. Til slut skal dette dokument gemmes som TIFF og fremg\u00e5 i kontekstdokumentationen. Skabelonen til dokumentet kan findes her.</p> <p>Eksempel</p> <p>Dokumentet \"Konverteringsfejl\" kan se ud som f\u00f8lger.  </p>"},{"location":"tools/tiffany/","title":"Tiffany","text":"<p>Tiffany er et tekstbaseret v\u00e6rkt\u00f8j (Command-Line Interface), som benyttes til at udfylde relevante 'huller' i MasterDocuments med passende template filer, s\u00e5ledes de overholder de juridiske krav til en aflevering.</p> <p>Bem\u00e6rk</p> <p>Tiffany er specifikt tilrettet Improventos m\u00e5de at aflevere originalfiler p\u00e5, s\u00e5 skal v\u00e6rkt\u00f8jet bruges til andre afleveringer end Notes-baser, skal man v\u00e6re opm\u00e6rksom p\u00e5 dette.</p> <p>Advarsel</p> <p>Det er vigtigt, at man i videst mulige omfang gennemf\u00f8rer konverteringsprocessen med convertool inden man bruger Tiffany, da man ellers kan komme til at erstatte ikke-konverterede filer med dummyfiler.</p>"},{"location":"tools/tiffany/#installation","title":"Installation","text":"<p>Tiffany skal installeres via releases p\u00e5 GitHub. Download f\u00f8rst den seneste <code>.whl</code>-fil, og install\u00e9r herefter denne via <code>pip</code>.</p> <p>Eksempel</p> <pre><code>pip install --user C:\\Downloads\\tifler-0.1.1-py3-none-any.whl\n</code></pre> <p>Bem\u00e6rk</p> <p>Installation via <code>.whl</code>-filer kr\u00e6ver, at pakken <code>wheel</code> er installeret. Dette skal kun foreg\u00e5 f\u00f8rste gang man har behov for at installere wheels, og det g\u00f8res som f\u00f8lger. <pre><code>pip install --user wheel\n</code></pre></p>"},{"location":"tools/tiffany/#opdatering","title":"Opdatering","text":"<p>N\u00e5r tifler skal opdateres, bruges igen <code>pip</code> med en ny <code>.whl</code>-fil og <code>--upgrade</code>.</p> <p>Eksempel</p> <pre><code>pip install --user --upgrade C:\\Downloads\\tifler-[new version]-py3-none-any.whl\n</code></pre>"},{"location":"tools/tiffany/#brug","title":"Brug","text":"<p>Som commandline v\u00e6rkt\u00f8j, og skal Tiffany benyttes direkte i for eksempel PowerShell. CLI'en er opbygget som f\u00f8lger.</p> <pre><code>tiffany [OPTIONS] [COMMANDS] [ARGS]\n</code></pre> <p>Tiffany har to optioner, som hverken tager efterf\u00f8lgende kommmandoer eller argumenter:</p> <ol> <li><code>--help</code> printer hj\u00e6lp</li> <li><code>--version</code> printer versionen af Tiffany</li> </ol> <p>Eksempel</p> <pre><code>tiffany --help\ntiffany --version\n</code></pre>"},{"location":"tools/tiffany/#kommandoer","title":"Kommandoer","text":"<p>Tiffany har to kommandoer: <code>substitute</code> or <code>list</code>.</p>"},{"location":"tools/tiffany/#substitute","title":"Substitute","text":"<p><code>substitute</code> erstatter tomme, ikke-bevaringsv\u00e6rdige, kodeordsbeskyttede eller korrumperede filer med dummyfiler, s\u00e5 arkiveringsversioner, hvor vi selv st\u00e5r for konvertering af filer, kan godkendes.</p>"},{"location":"tools/tiffany/#argumenter","title":"Argumenter","text":"<p><code>substitute</code> tager to argumenter: <code>DB_FILE</code> og <code>OUT_DIR</code>.</p> <ul> <li><code>DB_FILE</code> angiver stien til den <code>files.db</code> fil, der oprindeligt er genereret af Digiarch og som ligger i '_metadata'-mappen direkte under 'OriginalDocuments'-mappen)</li> <li><code>OUT_DIR</code> angiver stien, hvor de allerede konverterede filer fra Convertool er gemt.</li> </ul> <p>Eksempel</p> <pre><code>tiffany substitute .\\AVID.AARS.3.1\\OriginalDocuments\\_metadata\\files.db .\\AVID.AARS.3.1\\MasterDocuments\n</code></pre>"},{"location":"tools/tiffany/#proces","title":"Proces","text":"<p><code>substitute</code> gennemg\u00e5r overordnet to processer i fors\u00f8get p\u00e5 at finde ud af, hvilke dummyfiler, der skal/kan s\u00e6ttes hvor. F\u00f8rst arbejder den med <code>files.db</code>-databasens <code>_EmptyDirectories</code>-tabel for at finde kodeordsbeskyttede filer, og dern\u00e6st arbejdes der med et view kaldet <code>_NotConverted</code>, der lister alle filer, som ikke er konverterede.</p>"},{"location":"tools/tiffany/#kodeordsbeskyttede-filer","title":"Kodeordsbeskyttede filer","text":"<p>Hvis et originalt dokument er kodeordsbeskyttet, vil dokumentet ikke blive medtaget i den oprindelige aflevering fra Improvento, og der vil s\u00e5ledes blot v\u00e6re en tom folder i den <code>docCollection</code>, hvor dokumentet skulle have v\u00e6ret. Hver tom folder i de enkelte <code>docCollection</code> er registreret i <code>_EmptyDirectories</code>, s\u00e5 for hver r\u00e6kke i denne tabel g\u00f8res f\u00f8lgende:</p> <ol> <li>inds\u00e6t den relevante tif-template, hvor den originale fil skulle have v\u00e6ret.</li> <li>slet r\u00e6kken i <code>_EmptyDirectories</code>-tabellen.</li> </ol> <p>Efter endt proces vil <code>_EmptyDirectories</code>-tabellen v\u00e6re tom, og de resterende processer arbejder med <code>_NotConverted</code>-view'et.</p>"},{"location":"tools/tiffany/#korrumperede-filer","title":"Korrumperede filer","text":"<p>\u00d8delagte originalfiler, der ikke kan \u00e5bnes, figurerer i <code>_NotConverted</code> med f\u00f8lgende puid <code>aca-error/2</code>. Disse filer erstattes af den relevante dummyfil, og tilf\u00f8jes efterf\u00f8lgende til <code>_ConvertedFiles</code>-tabellen.</p>"},{"location":"tools/tiffany/#ikke-bevaringsvrdige-filer","title":"Ikke-bevaringsv\u00e6rdige filer","text":"<p>For hver r\u00e6kke i <code>_NotConverted</code>-view'et unders\u00f8ger Tiffany om filens puid eller filudvidelse figurerer i den interne <code>blacklist.py</code>-fil, der lister alle de puid'er og filudvidelser, som vi har vurderet til at v\u00e6re kassable. Hvis en fil har et puid eller en filudvidelse, som vi har blacklisted, erstattes den af den relevante dummyfil, og filen tilf\u00f8jes til <code>_ConvertedFiles</code>-tabellen.</p>"},{"location":"tools/tiffany/#tomme-filer","title":"Tomme filer","text":"<p>Convertool h\u00e5ndterer aktuelt erstatningen af tomme filer med den relevante dummyfil. P\u00e5 sigt skal dette \u00e6ndres s\u00e5 Tiffany ogs\u00e5 tager sig af denne opgave. Selvom <code>convertool</code> allerede har h\u00e5ndteret denne proces, vil eventuelle tomme filer stadig fremg\u00e5 af i den id'liste, som Tiffanys <code>list</code>-kommando genererer.</p>"},{"location":"tools/tiffany/#list","title":"List","text":"<p><code>list</code>-kommandoen oplister alle id'er p\u00e5 filer, der er blevet erstattet af en dummyfil, fordelt p\u00e5 fejltype.</p>"},{"location":"tools/tiffany/#argumenter_1","title":"Argumenter","text":"<p><code>list</code> tager \u00e9t argument: <code>LOG_FILE</code>, der angiver stien til Tiffanys logfil (se afsnittet logging):</p> <p>Eksempel</p> <pre><code>tiffany list .\\AVID.AARS.3.1\\MasterDocuments\\_metadata\\tiffany.log\n</code></pre>"},{"location":"tools/tiffany/#proces_1","title":"Proces","text":"<p><code>list</code> parser hele logfilen og printer id'er p\u00e5 alle de filer, der p\u00e5 grund af en eller anden fejl, er blevet erstattet af dummyfiler:</p> <p>Eksempel</p> <pre><code>Empty files:\n23\n542\n761\n794\nPassword-protected files:\n43\n321\nNo corrupted files substituted with template\nDisposable files:\n907\nFinished listing templates used\nSee the logfile and/or files.db for any remaining errors\n</code></pre> <p>Listen af id'er kan kopieres og inds\u00e6ttes i det kontekstdokument med oplistning af konverteringsfejl, som skal vedl\u00e6gges enhver arkiveringsverion.</p>"},{"location":"tools/tiffany/#logging","title":"Logging","text":"<p>Hver gang man k\u00f8rer <code>substitute</code> vil Tiffany oprette (eller skrive til en eksisterende) logfil i <code>_metadata</code>-mappe i roden af <code>OUT_DIR</code>. Logformatet er f\u00f8lgende: timestamp, loglevel, description, path to relevant file/folder. Eks.:</p> <pre><code>2021-06-03 15:39:44 INFO: Started substituting relevant files with tif-templates\n2021-06-03 15:39:44 INFO: Empty file substituted with template PATH: .AVID.AARS.1000.1\\MasterDocuments\\AVID.AARS.1000.1\\OriginalDocuments\\docCollection1\\1\\text.txt\n2021-06-03 15:39:44 INFO: Replaced password-protected file with template PATH: .AVID.AARS.1000.1\\MasterDocuments\\AVID.AARS.1000.1\\OriginalDocuments\\docCollection1\\4\n2021-06-03 15:39:44 INFO: Replaced disposable file with template PATH: .AVID.AARS.1000.1\\OriginalDocuments\\docCollection1\\8\\gs919w64.exe\n2021-06-03 15:39:44 INFO: Finished substituting with template-files\n</code></pre>"},{"location":"tools/unarchiver/","title":"Unarchiver","text":"<p><code>unarchiver</code> er et commandline v\u00e6rkt\u00f8j til at udpakke komplekse filer som mails og arkivfiler (.zip m.fl.).</p>"},{"location":"tools/unarchiver/#installation","title":"Installation","text":"<p>Unarchiver skal installeres via master branch med pipx:</p> <pre><code>pipx install git+https://github.com/aarhusstadsarkiv/unarchiver.git\n</code></pre> <p>Test efterf\u00f8lgende installationen med f\u00f8lgende kommando:</p> <pre><code>unarchiver --version\n</code></pre>"},{"location":"tools/unarchiver/#opdatering","title":"Opdatering","text":"<p>N\u00e5r man skal opdatere unarchiver, bruges <code>pipx</code> med <code>--upgrade</code>:</p> <pre><code>pipx upgrade unarchiver\n</code></pre>"},{"location":"tools/unarchiver/#afinstallation","title":"Afinstallation","text":"<pre><code>pipx uninstall unarchiver\n</code></pre>"},{"location":"tools/unarchiver/#forudstninger","title":"Foruds\u00e6tninger","text":"<p>For at identificere alle de udpakkede dokumenter rekursivt, har unarchiver brug for at commandline v\u00e6rkt\u00f8jet  <code>Siegfried</code>er installeret og tilg\u00e6ngelig i path. Test med <code>$ sf -v</code>. Siegfried er et eksternt Go-program, som benytter Pronom-registraturen til filidentifikation. Vi bruger det ogs\u00e5 bagved <code>digiarch</code>.</p>"},{"location":"tools/unarchiver/#brug","title":"Brug","text":"<p>Unarchiver tager en sti til en mappe eller en sti til en <code>files.db</code>-fil, genereret af <code>digiarch</code>.</p> <pre><code>unarchiver path_to_directory\n</code></pre> <p>eller</p> <pre><code>unarchiver path_to_files.db\n</code></pre> <p>N\u00e5r en myndighedsaflevering skal unarchives giver man stien til <code>files.db</code>-filen.</p> <p>Eksempel</p> <pre><code>unarchiver D:\\AVID.AARS.77.1\\OriginalFiles\\_metadata\\files.db\n</code></pre>"}]}